<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Mysql学习手册-基础 | 仙人一张</title>
  <meta name="description" content="概念数据库的好处 可以持久化数据到本地 结构化查询  sql结构化查询语言,用于和数据库通信的语言,不是某个数据库软件特有的,而是几乎所有的主流数据库通用的语言 操作常见命令 查看所有的数据库: show databases;  打开指定的库: use 库名  查看当前库的所有表: show tables;  查看其他库的所有表: show tables from 库名;  创建表 1234cre">
<meta property="og:type" content="article">
<meta property="og:title" content="Mysql学习手册-基础">
<meta property="og:url" content="http://yiiiqing.github.io/2021/05/06/Mysql%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C-%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="仙人一张">
<meta property="og:description" content="概念数据库的好处 可以持久化数据到本地 结构化查询  sql结构化查询语言,用于和数据库通信的语言,不是某个数据库软件特有的,而是几乎所有的主流数据库通用的语言 操作常见命令 查看所有的数据库: show databases;  打开指定的库: use 库名  查看当前库的所有表: show tables;  查看其他库的所有表: show tables from 库名;  创建表 1234cre">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://yiiiqing.github.io/2021/05/06/Mysql%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C-%E5%9F%BA%E7%A1%80/image-20210512140252302.png">
<meta property="og:image" content="http://yiiiqing.github.io/2021/05/06/Mysql%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C-%E5%9F%BA%E7%A1%80/image-20210512140327133.png">
<meta property="og:image" content="http://yiiiqing.github.io/2021/05/06/Mysql%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C-%E5%9F%BA%E7%A1%80/image-20210512140539427.png">
<meta property="article:published_time" content="2021-05-06T02:29:29.000Z">
<meta property="article:modified_time" content="2021-08-26T10:39:50.000Z">
<meta property="article:author" content="yiqing">
<meta property="article:tag" content="Mysql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yiiiqing.github.io/2021/05/06/Mysql%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C-%E5%9F%BA%E7%A1%80/image-20210512140252302.png">
  <!-- Canonical links -->
  <link rel="canonical" href="http://yiiiqing.github.io/2021/05/06/Mysql%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C-%E5%9F%BA%E7%A1%80/index.html">
  
    <link rel="alternate" href="/atom.xml" title="仙人一张" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.2"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/yiiiqing" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">Yiqing</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Web Developer</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shanghai, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">项目</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/yiiiqing" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://weibo.com/6370670336/profile?topnav=1&wvr=6&is_all=1" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>欢迎交流与分享经验! WechatID - user-yiqing</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DB/">DB</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Design/">Design</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">54</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kafka/">Kafka</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Markdown/">Markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/">Node.js</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ACID/" rel="tag">ACID</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Actuator/" rel="tag">Actuator</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ajax/" rel="tag">Ajax</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ant/" rel="tag">Ant</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bootstrap/" rel="tag">Bootstrap</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CAP/" rel="tag">CAP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CDN/" rel="tag">CDN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CROS/" rel="tag">CROS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS/" rel="tag">CentOS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DI/" rel="tag">DI</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/" rel="tag">Database</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Devtools/" rel="tag">Devtools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Druid/" rel="tag">Druid</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Error/" rel="tag">Error</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Express/" rel="tag">Express</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Guice/" rel="tag">Guice</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Interceptor/" rel="tag">Interceptor</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IoC/" rel="tag">IoC</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Isolation/" rel="tag">Isolation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java8/" rel="tag">Java8</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka/" rel="tag">Kafka</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/" rel="tag">Maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mybatis/" rel="tag">Mybatis</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mysql/" rel="tag">Mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/" rel="tag">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/" rel="tag">Node.js</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ORM/" rel="tag">ORM</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RPC/" rel="tag">RPC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RestFul/" rel="tag">RestFul</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sequelize/" rel="tag">Sequelize</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/" rel="tag">Shell</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a><span class="tag-list-count">23</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringCloud/" rel="tag">SpringCloud</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/" rel="tag">SpringMVC</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/String/" rel="tag">String</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swagger/" rel="tag">Swagger</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thread/" rel="tag">Thread</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thymeleaf/" rel="tag">Thymeleaf</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tomcat/" rel="tag">Tomcat</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Validation/" rel="tag">Validation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WEB/" rel="tag">WEB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zookeeper/" rel="tag">Zookeeper</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/async/" rel="tag">async</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/base64/" rel="tag">base64</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bash/" rel="tag">bash</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bug/" rel="tag">bug</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/byte/" rel="tag">byte[]</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cron/" rel="tag">cron</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/curl/" rel="tag">curl</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/download/" rel="tag">download</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/" rel="tag">express</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/file/" rel="tag">file</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gRPC/" rel="tag">gRPC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heartbeat/" rel="tag">heartbeat</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/" rel="tag">http</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/idea/" rel="tag">idea</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/import/" rel="tag">import</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jOOQ/" rel="tag">jOOQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdbc/" rel="tag">jdbc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/koa/" rel="tag">koa</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pm2/" rel="tag">pm2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/schedule/" rel="tag">schedule</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tcp/" rel="tag">tcp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/upload/" rel="tag">upload</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/utils/" rel="tag">utils</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vi/" rel="tag">vi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/websocket/" rel="tag">websocket</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yaml/" rel="tag">yaml</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" rel="tag">单例模式</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" rel="tag">字符串</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%A5%E9%94%99/" rel="tag">报错</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag">排序</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%B7%E5%BC%8F/" rel="tag">样式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" rel="tag">计算机组成原理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%85%8D%E7%BD%AE/" rel="tag">配置</a><span class="tag-list-count">17</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%85%8D%E7%BD%AE-Java/" rel="tag">配置 - Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%95%9C%E5%83%8F%E6%BA%90/" rel="tag">镜像源</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE/" rel="tag">项目</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/ACID/" style="font-size: 13px;">ACID</a> <a href="/tags/Actuator/" style="font-size: 13px;">Actuator</a> <a href="/tags/Ajax/" style="font-size: 13px;">Ajax</a> <a href="/tags/Ant/" style="font-size: 13px;">Ant</a> <a href="/tags/Bootstrap/" style="font-size: 13px;">Bootstrap</a> <a href="/tags/CAP/" style="font-size: 13px;">CAP</a> <a href="/tags/CDN/" style="font-size: 13px;">CDN</a> <a href="/tags/CROS/" style="font-size: 13px;">CROS</a> <a href="/tags/CentOS/" style="font-size: 13px;">CentOS</a> <a href="/tags/DI/" style="font-size: 13.11px;">DI</a> <a href="/tags/Database/" style="font-size: 13px;">Database</a> <a href="/tags/Devtools/" style="font-size: 13px;">Devtools</a> <a href="/tags/Docker/" style="font-size: 13.33px;">Docker</a> <a href="/tags/Druid/" style="font-size: 13px;">Druid</a> <a href="/tags/Error/" style="font-size: 13.11px;">Error</a> <a href="/tags/Express/" style="font-size: 13px;">Express</a> <a href="/tags/Guice/" style="font-size: 13px;">Guice</a> <a href="/tags/Interceptor/" style="font-size: 13.11px;">Interceptor</a> <a href="/tags/IoC/" style="font-size: 13.11px;">IoC</a> <a href="/tags/Isolation/" style="font-size: 13px;">Isolation</a> <a href="/tags/Java/" style="font-size: 13.22px;">Java</a> <a href="/tags/Java8/" style="font-size: 13px;">Java8</a> <a href="/tags/JavaScript/" style="font-size: 13.44px;">JavaScript</a> <a href="/tags/Kafka/" style="font-size: 13px;">Kafka</a> <a href="/tags/Linux/" style="font-size: 13.22px;">Linux</a> <a href="/tags/Markdown/" style="font-size: 13px;">Markdown</a> <a href="/tags/Maven/" style="font-size: 13px;">Maven</a> <a href="/tags/MySQL/" style="font-size: 13.56px;">MySQL</a> <a href="/tags/Mybatis/" style="font-size: 13.44px;">Mybatis</a> <a href="/tags/Mysql/" style="font-size: 13px;">Mysql</a> <a href="/tags/Nginx/" style="font-size: 13px;">Nginx</a> <a href="/tags/Node-js/" style="font-size: 13.44px;">Node.js</a> <a href="/tags/ORM/" style="font-size: 13.11px;">ORM</a> <a href="/tags/RPC/" style="font-size: 13px;">RPC</a> <a href="/tags/RabbitMQ/" style="font-size: 13px;">RabbitMQ</a> <a href="/tags/Redis/" style="font-size: 13.11px;">Redis</a> <a href="/tags/RestFul/" style="font-size: 13.11px;">RestFul</a> <a href="/tags/Sequelize/" style="font-size: 13.22px;">Sequelize</a> <a href="/tags/Shell/" style="font-size: 13.11px;">Shell</a> <a href="/tags/Spring/" style="font-size: 13.78px;">Spring</a> <a href="/tags/SpringBoot/" style="font-size: 14px;">SpringBoot</a> <a href="/tags/SpringCloud/" style="font-size: 13px;">SpringCloud</a> <a href="/tags/SpringMVC/" style="font-size: 13.67px;">SpringMVC</a> <a href="/tags/String/" style="font-size: 13.11px;">String</a> <a href="/tags/Swagger/" style="font-size: 13.11px;">Swagger</a> <a href="/tags/Thread/" style="font-size: 13px;">Thread</a> <a href="/tags/Thymeleaf/" style="font-size: 13px;">Thymeleaf</a> <a href="/tags/Tomcat/" style="font-size: 13px;">Tomcat</a> <a href="/tags/TypeScript/" style="font-size: 13px;">TypeScript</a> <a href="/tags/Validation/" style="font-size: 13px;">Validation</a> <a href="/tags/WEB/" style="font-size: 13px;">WEB</a> <a href="/tags/Zookeeper/" style="font-size: 13px;">Zookeeper</a> <a href="/tags/async/" style="font-size: 13px;">async</a> <a href="/tags/base64/" style="font-size: 13px;">base64</a> <a href="/tags/bash/" style="font-size: 13px;">bash</a> <a href="/tags/bug/" style="font-size: 13px;">bug</a> <a href="/tags/byte/" style="font-size: 13px;">byte[]</a> <a href="/tags/cron/" style="font-size: 13px;">cron</a> <a href="/tags/curl/" style="font-size: 13px;">curl</a> <a href="/tags/download/" style="font-size: 13.11px;">download</a> <a href="/tags/express/" style="font-size: 13.11px;">express</a> <a href="/tags/file/" style="font-size: 13.11px;">file</a> <a href="/tags/gRPC/" style="font-size: 13px;">gRPC</a> <a href="/tags/git/" style="font-size: 13px;">git</a> <a href="/tags/heartbeat/" style="font-size: 13px;">heartbeat</a> <a href="/tags/http/" style="font-size: 13px;">http</a> <a href="/tags/idea/" style="font-size: 13px;">idea</a> <a href="/tags/import/" style="font-size: 13px;">import</a> <a href="/tags/jOOQ/" style="font-size: 13px;">jOOQ</a> <a href="/tags/jdbc/" style="font-size: 13px;">jdbc</a> <a href="/tags/koa/" style="font-size: 13.22px;">koa</a> <a href="/tags/maven/" style="font-size: 13.11px;">maven</a> <a href="/tags/npm/" style="font-size: 13.11px;">npm</a> <a href="/tags/pm2/" style="font-size: 13px;">pm2</a> <a href="/tags/schedule/" style="font-size: 13px;">schedule</a> <a href="/tags/tcp/" style="font-size: 13px;">tcp</a> <a href="/tags/upload/" style="font-size: 13.11px;">upload</a> <a href="/tags/utils/" style="font-size: 13px;">utils</a> <a href="/tags/vi/" style="font-size: 13px;">vi</a> <a href="/tags/websocket/" style="font-size: 13px;">websocket</a> <a href="/tags/yaml/" style="font-size: 13px;">yaml</a> <a href="/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" style="font-size: 13.11px;">单例模式</a> <a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" style="font-size: 13.11px;">字符串</a> <a href="/tags/%E6%8A%A5%E9%94%99/" style="font-size: 13px;">报错</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 13.11px;">排序</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 13px;">数据结构</a> <a href="/tags/%E6%A0%B7%E5%BC%8F/" style="font-size: 13px;">样式</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" style="font-size: 13px;">计算机组成原理</a> <a href="/tags/%E9%85%8D%E7%BD%AE/" style="font-size: 13.89px;">配置</a> <a href="/tags/%E9%85%8D%E7%BD%AE-Java/" style="font-size: 13px;">配置 - Java</a> <a href="/tags/%E9%95%9C%E5%83%8F%E6%BA%90/" style="font-size: 13px;">镜像源</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 13.11px;">项目</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">一月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a><span class="archive-list-count">23</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a><span class="archive-list-count">31</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Java/">Java</a>
              </p>
              <p class="item-title">
                <a href="/2023/04/13/Spring-BeanFactory%E5%92%8CFactoryBean%E7%9A%84%E5%8C%BA%E5%88%AB/" class="title">Spring-BeanFactory和FactoryBean的区别</a>
              </p>
              <p class="item-date">
                <time datetime="2023-04-13T09:35:43.000Z" itemprop="datePublished">2023-04-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Java/">Java</a>
              </p>
              <p class="item-title">
                <a href="/2023/04/13/Spring-Bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" class="title">Spring-Bean的生命周期</a>
              </p>
              <p class="item-date">
                <time datetime="2023-04-13T09:22:34.000Z" itemprop="datePublished">2023-04-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Java/">Java</a>
              </p>
              <p class="item-title">
                <a href="/2023/03/21/Spring%E5%AE%B9%E5%99%A8%E7%9A%84refresh%E6%96%B9%E6%B3%95/" class="title">Spring容器的refresh方法</a>
              </p>
              <p class="item-date">
                <time datetime="2023-03-21T08:40:55.000Z" itemprop="datePublished">2023-03-21</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Java/">Java</a>
              </p>
              <p class="item-title">
                <a href="/2023/01/12/JavaWeb%E7%9F%A5%E8%AF%86%E7%82%B9/" class="title">JavaWeb知识点</a>
              </p>
              <p class="item-date">
                <time datetime="2023-01-12T07:05:09.000Z" itemprop="datePublished">2023-01-12</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kafka/">Kafka</a>
              </p>
              <p class="item-title">
                <a href="/2022/07/15/kafka%E6%B6%88%E6%81%AF%E8%BD%AC%E6%9C%AC%E5%9C%B0%E9%98%9F%E5%88%97%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%B6%88%E8%B4%B9%E4%B8%8B%E5%8F%91%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98/" class="title">kafka消息转本地队列多线程消费下发现的问题</a>
              </p>
              <p class="item-date">
                <time datetime="2022-07-15T05:00:05.000Z" itemprop="datePublished">2022-07-15</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-Mysql学习手册-基础" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Mysql学习手册-基础
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/05/06/Mysql%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C-%E5%9F%BA%E7%A1%80/" class="article-date">
	  <time datetime="2021-05-06T02:29:29.000Z" itemprop="datePublished">2021-05-06</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Web/">Web</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/Mysql/" rel="tag">Mysql</a>
  </span>


        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>


        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/05/06/Mysql%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C-%E5%9F%BA%E7%A1%80/#comments" class="article-comment-link">评论</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 11.1k(字)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 45(分)</span>
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><h3 id="数据库的好处"><a href="#数据库的好处" class="headerlink" title="数据库的好处"></a>数据库的好处</h3><ol>
<li>可以持久化数据到本地</li>
<li>结构化查询</li>
</ol>
<h3 id="sql"><a href="#sql" class="headerlink" title="sql"></a>sql</h3><p>结构化查询语言,用于和数据库通信的语言,不是某个数据库软件特有的,而是几乎所有的主流数据库通用的语言</p>
<h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><h3 id="常见命令"><a href="#常见命令" class="headerlink" title="常见命令"></a>常见命令</h3><ol>
<li><p>查看所有的数据库: <code>show databases;</code></p>
</li>
<li><p>打开指定的库: <code>use 库名</code></p>
</li>
<li><p>查看当前库的所有表: <code>show tables;</code></p>
</li>
<li><p>查看其他库的所有表: <code>show tables from 库名;</code></p>
</li>
<li><p>创建表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">	列名 列类型,</span><br><span class="line">	列名 列类型</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看表结构: <code>desc 表名;</code></p>
</li>
<li><p>查看服务器版本</p>
<ol>
<li>登录进mysql: <code>select version()</code></li>
<li>未登录: <code>mysql --version</code> 或 <code>mysql -V</code></li>
</ol>
</li>
</ol>
<h3 id="语法规范介绍"><a href="#语法规范介绍" class="headerlink" title="语法规范介绍"></a>语法规范介绍</h3><ol>
<li>不区分大小写;建议关键字大写,表名列名小写</li>
<li>每条命令用分号结尾</li>
<li>每条命令根据需要,可以进行缩进,或换行</li>
<li>注释<ol>
<li>单行注释: #xxx</li>
<li>单行注释: – xxx</li>
<li>多行: /* xxx */</li>
</ol>
</li>
</ol>
<h3 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h3><ul>
<li>查询常量:<ul>
<li> <code>SELECT 100;</code></li>
<li><code>SELECT &#39;john&#39;</code></li>
<li><strong>字符型和日期型的常量值必须用单引号引起来</strong>,数值型不需要</li>
</ul>
</li>
<li>查询表达式:<ul>
<li><code>SELECT 100%98;</code></li>
</ul>
</li>
<li>查询函数: <code>SELECT VERSION();</code></li>
<li>起别名:<ul>
<li>使用as <code>SELECT 100%98 AS result;</code></li>
<li>使用空格 <code>SELECT last_name 姓;</code></li>
<li>别名有关键字要加双引号 <code>SELECT last_name AS &quot;out put&quot;;</code></li>
</ul>
</li>
<li>去重: <code>SELECT DISTINCT dep_id from department;</code><ul>
<li>不允许<code>SELECT DISTINCT a, b from c;</code>尽管语法无错误,但是没有去重效果</li>
</ul>
</li>
<li>+号:<strong>mysql中的加号只有一个功能: 运算符</strong> <ul>
<li><code>SELECT 100+90;</code>两个都为数值型,做加法运算</li>
<li><code>SELECT &#39;123&#39;+90;</code> 其中一方为字符型,视图将字符型数值转换为数值型;如果转换成功,则继续做加法运算,如果转换失败,则将字符型数值转换成0</li>
<li><code>SELECT &#39;john&#39;+90;</code> //结果为90</li>
<li><code>SELECT null+10; </code>//结果为null,只要一方为null,结果就为null</li>
</ul>
</li>
<li>替换null: <code>IFNULL(字段名,替换值)</code></li>
<li>判断是否为null: <code>ISNULL</code> 如果为null返回1,否则为0</li>
</ul>
<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 查询列表</span><br><span class="line"><span class="keyword">from</span> 表名</span><br><span class="line"><span class="keyword">where</span> 筛选条件;</span><br></pre></td></tr></table></figure>

<ol>
<li>按条件表达式筛选<ol>
<li>条件运算符: &gt; &lt; = != &lt;&gt; &gt;= &lt;=</li>
</ol>
</li>
<li>按逻辑表达式筛选(用于连接条件表达式)<ol>
<li>逻辑运算符: &amp;&amp; || !</li>
<li>Mysql中推荐: and or not</li>
</ol>
</li>
<li>模糊查询<ol>
<li>like<ul>
<li>一般和通配符搭配使用<ul>
<li>%: 任意多个字符,包含0个</li>
<li>_: 任意单个字符</li>
</ul>
</li>
</ul>
</li>
<li>between and</li>
<li>in<ul>
<li>类似于=和or的连接简化(所以不支持模糊搜索)</li>
<li>列表的值类型要一致或兼容</li>
</ul>
</li>
<li>is null<ul>
<li>= 或 &lt;&gt; 不能用于判断null</li>
<li>is null 或 is not null可以用于判断null</li>
</ul>
</li>
<li>&lt;=&gt; 安全等于: 可以判断值和null</li>
</ol>
</li>
</ol>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">SELECT * </span><br><span class="line">FROM employees</span><br><span class="line">WHERE NOT(department_id&gt;=90 AND department_id&lt;=100) OR salary&gt;15000;</span><br><span class="line"></span><br><span class="line">SELECT * </span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name LIKE  &#x27;%a%&#x27;; </span><br><span class="line"></span><br><span class="line">SELECT * </span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name LIKE  &#x27;__n_l%&#x27;;</span><br><span class="line"></span><br><span class="line">SELECT * </span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name LIKE  &#x27;_\_%&#x27;; # 查询第二个为下划线,需要转义</span><br><span class="line"></span><br><span class="line">SELECT * </span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name LIKE  &#x27;_$_%&#x27; ESCAPE&#x27;$&#x27;; # 查询第二个为下划线,指定转义字符</span><br></pre></td></tr></table></figure>

<h3 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表名</span><br><span class="line">where 筛选条件</span><br><span class="line">order by 排序列表 [asc|desc]; # 默认升序</span><br></pre></td></tr></table></figure>

<p>order by 的位置一般放在查询语句的最后(除limit语句之外)</p>
<h4 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h4><ol>
<li><p>按照员工年薪排序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *, salary*12*(1+IFNULL(commision_pct,0)) 年薪</span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY 年薪 DESC;</span><br></pre></td></tr></table></figure>
</li>
<li><p>按姓名长度排序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT LENGHT(last_name) 字节长度, last_name, salary</span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY LENGTH(last_name) DESC;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询员工信息,要求先按照工资升序,再按员工编号降序[多个字段排序]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * </span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY salary ASC, employee_id DESC;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="常见函数"><a href="#常见函数" class="headerlink" title="常见函数"></a>常见函数</h2><h3 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h3><p>将一组逻辑语句封装方法体中,对外暴露方法名</p>
<p>好处:</p>
<ol>
<li>隐藏了实现细节</li>
<li>提高代码的重用性</li>
</ol>
<p>调用:<code>select 函数名(实参列表) [from 表];</code></p>
<p>分类:</p>
<ol>
<li>单行函数: concat,length,ifnull</li>
<li>分组函数: 统计使用,又称为统计函数</li>
</ol>
<h3 id="单行函数"><a href="#单行函数" class="headerlink" title="单行函数"></a>单行函数</h3><h4 id="字符函数"><a href="#字符函数" class="headerlink" title="字符函数"></a>字符函数</h4><ol>
<li><p>length</p>
<p><code>select LENGTH(&#39;张三丰&#39;);</code>结果为9, 因为utf8下一个汉字3个字节</p>
</li>
<li><p>concat 拼接</p>
<p><code>select CONCAT(last_name,&#39;_&#39;,first_name) 姓名 from employees;</code></p>
</li>
<li><p>upper,lower 大小写</p>
<p><code>select UPPER(&#39;jogn&#39;);</code></p>
</li>
<li><p>substr, substring 返回子串</p>
<p><code>SELECT SUBSTR(&#39;李莫愁爱上了陆展元&#39;, 7 ) out_put; #陆展元</code></p>
<p><code>SELECT SUBSTR(&#39;李莫愁爱上了陆展元&#39;, 1,3 ) out_put; #李莫愁</code></p>
</li>
<li><p>instr 返回起始索引</p>
<p><code>SELECT INSTR(&#39;杨不悔爱上了殷六侠&#39;,&#39;殷六侠&#39;) AS out_put; #7</code></p>
</li>
<li><p>trim</p>
<p><code>SELECT TRIM(&#39;        张翠山    &#39;) AS out_put;</code></p>
<p><code>SELECT TRIM(&#39;a&#39; FROM &#39;aaaaa张aaa翠aaa山aaaaaa&#39;) AS out_put;#张aaa翠aaa山</code></p>
</li>
<li><p>lpad 用指定字符左填充</p>
<p><code>SELECT LPAD(&#39;殷素素&#39;,10,&#39;*&#39;) AS out_put;# *******殷素素</code></p>
</li>
<li><p>rpad 用指定字符右填充</p>
<p><code>SELECT RPAD(&#39;殷素素&#39;,12,&#39;ab&#39;) AS out_put;# 殷素素ababababa</code></p>
</li>
<li><p>replace 替换</p>
<p><code>SELECT REPLACE(&#39;张无忌爱上了周芷若&#39;,&#39;周芷若&#39;,&#39;赵敏&#39;) AS out_put;</code></p>
</li>
</ol>
<h4 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h4><ol>
<li><p>round 四舍五入</p>
<p><code>SELECT ROUND(-1.65) # -2</code></p>
<p><code>SELECT ROUND(-1.657,2) # -1.66</code> 保留两位</p>
</li>
<li><p>ceil 向上取整,返回&gt;=该参数的最小整数</p>
</li>
<li><p>floor 向下取整,返回&lt;=该参数的最大整数</p>
</li>
<li><p>truncate 截断</p>
<p><code>SELECT TRUNCATE(1.69999,1) # 1.6</code></p>
</li>
<li><p>mod 取余</p>
<p>MOD(a,b): a - a / b * b</p>
<p>MOD(-10,-3): -10 - (-10)/(-3) * (-3) = -1</p>
<p>被除数为正,结果为正</p>
<p><code>SELECT MOD(10,3); #1</code></p>
<p><code>SELECT MOD(10,-3); #1</code></p>
</li>
</ol>
<h4 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h4><ol>
<li><p>now 返回当前系统日期+时间</p>
<p><code>SELECT NOW();</code></p>
</li>
<li><p>curdate 返回当前系统日期,不包含时间</p>
<p><code>SELECT CURDATE();</code></p>
</li>
<li><p>curtime 返回当前时间,不包含日期</p>
<p><code>SELECT CURTIME();</code></p>
</li>
<li><p>可以获取指定的部分,年月日时分秒</p>
<p><code>SELECT YEAR(NOW()) 年;</code></p>
<p><code>SELECT MONTHNAME(NOT()) 月;</code></p>
</li>
<li><p>str_to_date 将日期格式的字符串转换成指定格式的日期</p>
<p><code>SELECT STR_TO_DATE(&#39;1998-3-2&#39;,&#39;%Y-%c-%d&#39;) AS out_put;# 1998-03-02</code></p>
<p><code>SELECT * FROM employees WHERE hiredate = STR_TO_DATE(&#39;4-3 1992&#39;,&#39;%c-%d %Y&#39;);</code> 指定输入格式</p>
</li>
<li><p>date_format 将日期转换成字符</p>
<p><code>SELECT DATE_FORMAR(NOW(), &#39;%y年%m月%d日&#39;) AS out_put;</code></p>
</li>
<li><p>返回两个日期相差的天数: <code>DATEDIFF</code></p>
</li>
<li><p>以英文形式返回月: <code>MONTHNAME</code></p>
</li>
</ol>
<h4 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT VERSION();</span><br><span class="line">SELECT DATABASE();</span><br><span class="line">SELECT USER();</span><br><span class="line">SELECT PASSWORD(&#x27;字符&#x27;); # 返回该字符的加密形式</span><br><span class="line">SELECT MD5(&#x27;字符&#x27;); # 返回该字符的加密形式</span><br></pre></td></tr></table></figure>

<h4 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h4><ol>
<li><p>if</p>
<p><code>SELECT IF(10&gt;5,&#39;大&#39;,&#39;小&#39;);</code></p>
</li>
<li><p>case</p>
<ol>
<li><p>使用一: switch case的效果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">case 要判断的字段或表达式</span><br><span class="line">when 常量1 then 要显示的值1或语句1;</span><br><span class="line">when 常量2 then 要显示的值2或语句2;</span><br><span class="line">...</span><br><span class="line">else 要显示的值n或语句n;</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用二: 多重if</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">case</span><br><span class="line">when 条件1 then 要显示的值1或语句1</span><br><span class="line">when 条件2 then 要显示的值2或语句2</span><br><span class="line">...</span><br><span class="line">else 要显示的值n或语句n;</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>示例:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT salary,</span><br><span class="line">CASE</span><br><span class="line">WHEN salary&gt;20000 THEN &#x27;A&#x27;</span><br><span class="line">WHEN salary&gt;15000 THEN &#x27;B&#x27;</span><br><span class="line">WHEN salary&gt;10000 THEN &#x27;C&#x27;</span><br><span class="line">ELSE &#x27;D&#x27;</span><br><span class="line">END AS 工资级别</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
<h3 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h3><p>用作统计使用,又称为聚合函数或统计函数或组函数</p>
<p><strong>和分组函数一通查询的字段,要求是GROUP BY后的字段</strong></p>
<h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><p>sum求和,avg平均值,max最大值,min最小值,count计算个数</p>
<h4 id="参数支持类型"><a href="#参数支持类型" class="headerlink" title="参数支持类型"></a>参数支持类型</h4><p>sum, avg一般用于处理数值型</p>
<p>max, min, count可以处理任何类型</p>
<h4 id="是否忽略null"><a href="#是否忽略null" class="headerlink" title="是否忽略null"></a>是否忽略null</h4><p>以上函数都忽略了null值</p>
<h4 id="和distinct搭配"><a href="#和distinct搭配" class="headerlink" title="和distinct搭配"></a>和distinct搭配</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT SUM(DISTINCT salary), SUM(salary) FROM employees;</span><br><span class="line">SELECT COUNT(DISTINCT salary), COUNT(salary) FROM employees;</span><br></pre></td></tr></table></figure>

<h4 id="count详细介绍"><a href="#count详细介绍" class="headerlink" title="count详细介绍"></a>count详细介绍</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*) FROM employees; # 统计行数</span><br><span class="line">SELECT COUNT(1) FROM employees; # 统计行数(只要COUNT里面是常量)</span><br></pre></td></tr></table></figure>

<p>效率:</p>
<p>MYISAM存储引擎下, COUNT(*) 效率最高</p>
<p>INNODB存储引擎下, COUNT(*) 和 COUNT(1) c差不多,比COUNT(‘字段’) 高</p>
<h2 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h2><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select 分组函数, 列(要求出现在group by后)</span><br><span class="line">from 表</span><br><span class="line">[where 筛选条件]</span><br><span class="line">group by 分组列表</span><br><span class="line">[order by 子句]</span><br></pre></td></tr></table></figure>

<p>注意: 查询列表必须特殊,要求是分组函数和group by后出现的字段</p>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><p>分组查询的筛选条件分为两类</p>
<ul>
<li>分组前筛选<ul>
<li>数据源: 原始表</li>
<li>位置: group by子句前</li>
<li>关键字: where</li>
</ul>
</li>
<li>分组后筛选<ul>
<li>数据源: 分组后的结果集</li>
<li>位置: group by子句后</li>
<li>关键字: having</li>
</ul>
</li>
</ul>
<blockquote>
<p>分组函数做条件肯定放在having中</p>
<p>能用分组前筛选的优先使用分组前筛选</p>
<p>group支持单个字段分组,多个字段分组(用逗号隔开,无顺序),表达式或函数(使用少)</p>
<p>排序要放在group by之后</p>
</blockquote>
<h3 id="案例-2"><a href="#案例-2" class="headerlink" title="案例"></a>案例</h3><ol>
<li><p>查询每个工种的最高工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select max(salary), job_id</span><br><span class="line">from employees</span><br><span class="line">group by job_id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询每个位置上部门个数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select count(*), location_id</span><br><span class="line">from employees</span><br><span class="line">group by location_id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询邮箱中包含a字符的,每个部门的平均工资</p>
<p><strong>分组前的筛选使用where</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select avg(salary), department_id</span><br><span class="line">from employees</span><br><span class="line">where email like &#x27;%a%&#x27;</span><br><span class="line">group by department_id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询哪个部门的员工个数&gt;2</p>
<p><strong>分组后的筛选使用having</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 查询每个部门的员工个数</span><br><span class="line"># 根据1的结果筛选,查询&gt;2的</span><br><span class="line">select count(*), department_id</span><br><span class="line">from employees</span><br><span class="line">group by department_id</span><br><span class="line">having count(*)&gt;2;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 查询每个工种有奖金的员工的最高工资</span><br><span class="line">select max(salary),job_id</span><br><span class="line">from employees</span><br><span class="line">where commission_pct is not null</span><br><span class="line">group by job_id;</span><br><span class="line"># 根据结果筛选最高工资&gt;12000</span><br><span class="line">select max(salary),job_id</span><br><span class="line">from employees</span><br><span class="line">where commission_pct is not null</span><br><span class="line">group by job_id</span><br><span class="line">having max(salary)&gt;12000;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询每个部门每个工种的员工的平均工资</p>
<p><strong>按多个字段分组</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select avg(salary), department_id, job_id</span><br><span class="line">from employees</span><br><span class="line">group by job_id,department_id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询每个部门每个工种的员工的平均工资,并且按高低排序</p>
<p><strong>排序</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select avg(salary),department_id,job_id</span><br><span class="line">from employees</span><br><span class="line">group by job_id,department_id</span><br><span class="line">having avg(salary)&gt;10000</span><br><span class="line">order by avg(salary) desc;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h2><h3 id="概念-2"><a href="#概念-2" class="headerlink" title="概念"></a>概念</h3><h4 id="笛卡尔乘积"><a href="#笛卡尔乘积" class="headerlink" title="笛卡尔乘积"></a>笛卡尔乘积</h4><p>现象: 表1有m行,表2有n行,结果为m*n行</p>
<p>原因: 没有有效的连接条件</p>
<p>如何避免: 添加有效的连接条件</p>
<h4 id="分类-1"><a href="#分类-1" class="headerlink" title="分类"></a>分类</h4><ul>
<li>按年代分类(mysql)<ul>
<li>sql92标准: 仅支持内连接</li>
<li>sql99标准[推荐]: 支持内连接+外连接(左外和右外)+交叉连接 </li>
</ul>
</li>
<li>按功能分类<ul>
<li>内连接<ul>
<li>等值连接</li>
<li>非等值连接</li>
<li>自连接</li>
</ul>
</li>
<li>外连接<ul>
<li>左外连接</li>
<li>右外连接</li>
<li>全外连接</li>
</ul>
</li>
<li>交叉连接</li>
</ul>
</li>
</ul>
<h3 id="sql92标准"><a href="#sql92标准" class="headerlink" title="sql92标准"></a>sql92标准</h3><h4 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h4><h5 id="等值连接"><a href="#等值连接" class="headerlink" title="等值连接"></a>等值连接</h5><p>案例: 查询女神名和对应的男神名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select name,boyname</span><br><span class="line">from boys,beauty</span><br><span class="line">where beauty.boyfriend_id=boys.id</span><br></pre></td></tr></table></figure>

<ol>
<li>给表起别名<ol>
<li>提高语句简洁度</li>
<li>区分多个重名字段</li>
<li>起了别名,就要用别名限定</li>
</ol>
</li>
<li>两个表的顺序可以调换</li>
<li>可以加筛选,分组,排序等</li>
</ol>
<h5 id="非等值连接"><a href="#非等值连接" class="headerlink" title="非等值连接"></a>非等值连接</h5><p>案例: 查询员工工资级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select salary,grade_level</span><br><span class="line">from employees e, job_grades g</span><br><span class="line">where salary between g.`lowest_sal` and g.`highest_sal`;</span><br></pre></td></tr></table></figure>

<h5 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h5><p>要求一张表中包含了所需的信息,把自己当成多张表使用</p>
<p>案例: 员工名和上级的名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select e.employee_id, e.lastname, m.employee_id, m.last_name</span><br><span class="line">from employees e, employees m</span><br><span class="line">where e.`manager_id`=m.`employee_id`</span><br></pre></td></tr></table></figure>

<h3 id="sql99标准"><a href="#sql99标准" class="headerlink" title="sql99标准"></a>sql99标准</h3><h4 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 查询列表</span><br><span class="line"><span class="keyword">from</span> 表<span class="number">1</span> 别名 [连接类型]</span><br><span class="line"><span class="keyword">join</span> 表<span class="number">2</span>	别名</span><br><span class="line"><span class="keyword">on</span> 连接条件</span><br><span class="line">[<span class="keyword">where</span> 筛选条件]</span><br><span class="line">[<span class="keyword">group</span> <span class="keyword">by</span> 分组条件]</span><br><span class="line">[<span class="keyword">having</span> 筛选条件]</span><br><span class="line">[<span class="keyword">order</span> <span class="keyword">by</span> 排序列表]</span><br></pre></td></tr></table></figure>

<h4 id="连接类型"><a href="#连接类型" class="headerlink" title="连接类型"></a>连接类型</h4><ul>
<li>内连接: inner</li>
<li>外连接<ul>
<li>左外: left [outer]</li>
<li>右外: right (outer)</li>
<li>全外: full (outer)</li>
</ul>
</li>
<li>交叉连接: cross</li>
</ul>
<h4 id="内连接-1"><a href="#内连接-1" class="headerlink" title="内连接"></a>内连接</h4><h5 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 别名</span><br><span class="line">inner join 表2	别名</span><br><span class="line">on 连接条件</span><br></pre></td></tr></table></figure>

<h5 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h5><ol>
<li>可以添加排序,分组,筛选</li>
<li>inner可以省略</li>
<li>筛选条件放在where后面,连接条件放在on后面.提高分离性,便于阅读</li>
<li>inner join连接和sql92语法中的等值连接效果一样</li>
</ol>
<h5 id="分类-2"><a href="#分类-2" class="headerlink" title="分类"></a>分类</h5><h6 id="等值连接-1"><a href="#等值连接-1" class="headerlink" title="等值连接"></a>等值连接</h6><p>查询员工名,部门名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select last_name,department_name</span><br><span class="line">from employees e</span><br><span class="line">inner join departments d</span><br><span class="line">on e.`department_id` = d.`department_id`;</span><br></pre></td></tr></table></figure>

<p>查询员工名,部门名,工种名,按部门名降序(三表)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select last_name,department_name,job_title</span><br><span class="line">from employees e</span><br><span class="line">inner join departments d on e.`department_id`=d.`department_id`</span><br><span class="line">inner join jobs j on e.`job_id`=j.`job_id`</span><br><span class="line">order by depart_name desc;</span><br></pre></td></tr></table></figure>

<h6 id="非等值连接-1"><a href="#非等值连接-1" class="headerlink" title="非等值连接"></a>非等值连接</h6><p>查询员工工资级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select salary,grade_level</span><br><span class="line">from employees e</span><br><span class="line">join job_grades g</span><br><span class="line">on e.`salary` between g.`lowest_sal` and g.`highest_sal`;</span><br></pre></td></tr></table></figure>

<h6 id="自连接-1"><a href="#自连接-1" class="headerlink" title="自连接"></a>自连接</h6><p>案例: 员工名和上级的名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select e.employee_id, e.lastname, m.employee_id, m.last_name</span><br><span class="line">from employees e</span><br><span class="line">join employees m</span><br><span class="line">on e.`manager_id`=m.`employee_id`</span><br></pre></td></tr></table></figure>

<h4 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h4><p>用于查询,一个表中有,另一个表中没有的记录</p>
<p>用于查询除了交集部分的剩余不匹配的行</p>
<h5 id="特点-2"><a href="#特点-2" class="headerlink" title="特点"></a>特点</h5><ol>
<li>外连接的查询结果为主表中的所有记录<ol>
<li>如果从表中有和它相匹配的,则显示匹配的值</li>
<li>如果从表中没有和它匹配的,则显示null</li>
<li>外连接查询结果=内连接结果+主表中有而从表中没有的记录</li>
</ol>
</li>
<li>左外连接, left join左边的是主表</li>
<li>右外连接, right join右边的是主表</li>
<li>左外和右外交换两个表的顺序,可以实现相同的结果</li>
<li>全外连接=内连接的结果+表1中有表2没有的+表2中有但表1中没有的</li>
</ol>
<h5 id="左外连接"><a href="#左外连接" class="headerlink" title="左外连接"></a>左外连接</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 主表b</span><br><span class="line">select b.name,bo.*</span><br><span class="line">from beauty b</span><br><span class="line">left outer join boys bo</span><br><span class="line">on b.`boyfriend_id` = bo.`id`;</span><br><span class="line"></span><br><span class="line"># 主表bo</span><br><span class="line">select b.name,bo.*</span><br><span class="line">from boys bo</span><br><span class="line">left outer join beauty b</span><br><span class="line">on b.`boyfriend_id` = bo.`id`;</span><br></pre></td></tr></table></figure>

<h5 id="右外连接"><a href="#右外连接" class="headerlink" title="右外连接"></a>右外连接</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 主表b</span><br><span class="line">select b.name,bo.*</span><br><span class="line">from boys bo</span><br><span class="line">right outer join beauty b</span><br><span class="line">on b.`boyfriend_id` = bo.`id`;</span><br></pre></td></tr></table></figure>

<h4 id="全外连接"><a href="#全外连接" class="headerlink" title="全外连接"></a>全外连接</h4><p>mysql不支持</p>
<h4 id="交叉连接"><a href="#交叉连接" class="headerlink" title="交叉连接"></a>交叉连接</h4><p>其实就是使用99语法来实现笛卡尔乘积</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select b.*,bo.*</span><br><span class="line">from beauty b</span><br><span class="line">cross join boys bo;</span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><img src="image-20210512140252302.png" alt="image-20210512140252302"></p>
<p><img src="image-20210512140327133.png" alt="image-20210512140327133"></p>
<p><img src="image-20210512140539427.png" alt="image-20210512140539427"></p>
<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>出现在其他语句中的select语句,称为子查询或内查询</p>
<p>外部的查询语句,称为主查询或外查询</p>
<p>分类:</p>
<ul>
<li>子查询出现的位置:<ul>
<li>select后面<ul>
<li>仅支持标量子查询</li>
</ul>
</li>
<li>from后面<ul>
<li>支持表子查询</li>
</ul>
</li>
<li><strong>where或having后面(重点)</strong><ul>
<li><strong>标量子查询</strong></li>
<li><strong>列子查询</strong></li>
<li>行子查询</li>
</ul>
</li>
<li>exists后面(相关子查询)<ul>
<li>表子查询</li>
</ul>
</li>
</ul>
</li>
<li>按结果集的行列数:<ul>
<li>标量子查询(结果集只有一行一列)</li>
<li>列子查询(结果集只有一列多行)</li>
<li>行子查询(结果集有一行多列)</li>
<li>表子查询(结果集一般为多行多列)</li>
</ul>
</li>
</ul>
<h3 id="where或having后面"><a href="#where或having后面" class="headerlink" title="where或having后面"></a>where或having后面</h3><ol>
<li>标量子查询(单行子查询)</li>
<li>列子查询(多行子查询)</li>
<li>行子查询(一行多列)</li>
</ol>
<h4 id="特点-3"><a href="#特点-3" class="headerlink" title="特点"></a>特点</h4><ol>
<li>子查询放在小括号内</li>
<li>子查询一般放在条件的右侧</li>
<li>标量子查询,一般搭配着单行操作符使用 &gt; &lt; &gt;= &lt;= = &lt;&gt;</li>
<li>列子查询,一般搭配着多行操作符使用 in, any/some, all<ol>
<li>a &gt; any(10,20,30) a大于任何一个就可以匹配(相当min)</li>
<li>a &gt; all(10,20,30) a大于所有的(相当max)</li>
</ol>
</li>
<li>子查询的执行优先于主查询执行</li>
</ol>
<h4 id="标量子查询"><a href="#标量子查询" class="headerlink" title="标量子查询"></a>标量子查询</h4><ol>
<li><p>谁的工资比Abel高</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select *</span><br><span class="line">from employees</span><br><span class="line">where salary&gt;(</span><br><span class="line"></span><br><span class="line">  select salary</span><br><span class="line">  from employees</span><br><span class="line">  where last_name = &#x27;Abel&#x27;</span><br><span class="line">  </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>返回job_id与141号员工相同, salary比143号员工多的员工    姓名,job_id,工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 查询141号员工的job_id</span><br><span class="line">select job_id</span><br><span class="line">from employees</span><br><span class="line">where employee_id = 141</span><br><span class="line"># 查询143号员工的salary</span><br><span class="line">select salary</span><br><span class="line">from employees</span><br><span class="line">where employee_id = 143</span><br><span class="line"># 查询员工的姓名, job_id 和工资</span><br><span class="line">select last_name,job_id,salary</span><br><span class="line">from employees</span><br><span class="line">where job_id = (</span><br><span class="line">  select job_id</span><br><span class="line">  from employees</span><br><span class="line">  where employee_id = 141</span><br><span class="line">) and salary &gt; (</span><br><span class="line">	select salary</span><br><span class="line">  from employees</span><br><span class="line">  where employee_id = 143</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>返回公司工资最少的员工的last_name,job_id和salary</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select last_name, job_id, salary</span><br><span class="line">from employees</span><br><span class="line">where salary = (</span><br><span class="line">	select min(salary)</span><br><span class="line">  from employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询最低工资大于50号部门最低工资的部门id和其最低工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 查询50号部门的最低工资</span><br><span class="line">select min(salary)</span><br><span class="line">from employees</span><br><span class="line">where deplartment_id = 50;</span><br><span class="line"># 查询每个部门的最低工资</span><br><span class="line">select min(salary), department_id</span><br><span class="line">from employees</span><br><span class="line">group by department_id</span><br><span class="line"># 满足min(salary) &gt; 第一步</span><br><span class="line">select min(salary), department_id</span><br><span class="line">from employees</span><br><span class="line">group by department_id</span><br><span class="line">having min(salary) &gt; (</span><br><span class="line">	select min(salary)</span><br><span class="line">	from employees</span><br><span class="line">	where deplartment_id = 50;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="列子查询"><a href="#列子查询" class="headerlink" title="列子查询"></a>列子查询</h4><ol>
<li><p>查询location_id是1400或1700的部门中的所有员工姓名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select last_name</span><br><span class="line">from employees</span><br><span class="line">where department_id in (</span><br><span class="line">  select distinct department_id</span><br><span class="line">  from departments</span><br><span class="line">  where location_id in (1400,1700)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="行子查询"><a href="#行子查询" class="headerlink" title="行子查询"></a>行子查询</h4><ol>
<li><p>查询员工编号最小并且工资最高的员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 查询最小的员工编号</span><br><span class="line">select min(employee_id) from employees</span><br><span class="line"># 查询最高工资</span><br><span class="line">select max(salary) from employees</span><br><span class="line"># 查询员工信息</span><br><span class="line">select *</span><br><span class="line">from employees</span><br><span class="line">where employee_id = (</span><br><span class="line">	select min(employee_id) from employees</span><br><span class="line">)and salary = (</span><br><span class="line">	select max(salary) from employees</span><br><span class="line">)</span><br><span class="line"># 2.0</span><br><span class="line">select *</span><br><span class="line">from employees</span><br><span class="line">where (employee_id,salary)=(</span><br><span class="line">	select min(employee_id),max(salary)</span><br><span class="line">  from employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="select后面"><a href="#select后面" class="headerlink" title="select后面"></a>select后面</h3><p><strong>仅仅支持标量子查询</strong></p>
<ol>
<li><p>查询每个部门的员工个数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select d.*,(</span><br><span class="line">	select count(*)</span><br><span class="line">  from employees e</span><br><span class="line">  where e.department_id = d.`department_id` # 查询某一条的时候,找对应该条的</span><br><span class="line">) 个数</span><br><span class="line">from departments d;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询员工号=102的部门名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select (</span><br><span class="line">	select department_name</span><br><span class="line">  from departments d</span><br><span class="line">  where </span><br><span class="line">)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="from后面"><a href="#from后面" class="headerlink" title="from后面"></a>from后面</h3><p><strong>将子查询结果充当一张表,要求必须起别名</strong></p>
<p>查询每个部门的平均工资的工资等级</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 查询每个部门的平均工资</span><br><span class="line">select avg(salary),department_id</span><br><span class="line">from employees</span><br><span class="line">group by department_id;</span><br><span class="line"># 查询工资等级表</span><br><span class="line">select * from job_grades;</span><br><span class="line"># 连接1的结果,筛选</span><br><span class="line">select </span><br><span class="line">from (</span><br><span class="line">	select avg(salary) ag,department_id</span><br><span class="line">  from employees</span><br><span class="line">  group by department_id</span><br><span class="line">) avg_dep</span><br><span class="line">inner join job_grades g</span><br><span class="line">on avg_dep.ag between g.lowest_sal and g.highest_sal;</span><br></pre></td></tr></table></figure>

<h3 id="exist后面-相关子查询"><a href="#exist后面-相关子查询" class="headerlink" title="exist后面(相关子查询)"></a>exist后面(相关子查询)</h3><p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exists (完整的查询语句)</span><br><span class="line"># 结果为0/1</span><br></pre></td></tr></table></figure>

<ol>
<li><p>查询有员工的部门名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># exist</span><br><span class="line">select department_name</span><br><span class="line">from departments d</span><br><span class="line">where exists(</span><br><span class="line">	select *</span><br><span class="line">  from employees e</span><br><span class="line">  where d.`department_id`=e.`department_id`</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#in</span><br><span class="line">select department_name</span><br><span class="line">from departments d </span><br><span class="line">where d.`department_id` in (</span><br><span class="line">	select department_id</span><br><span class="line">  from employees</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询没有女朋友的男生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># in</span><br><span class="line">select bo.*</span><br><span class="line">from boys bo</span><br><span class="line">where bo.id not in (</span><br><span class="line">	select boyfriend_id</span><br><span class="line">  from beauty</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># exist</span><br><span class="line">select bo.*</span><br><span class="line">from boys bo</span><br><span class="line">where not exists(</span><br><span class="line">	select boyfriend_id</span><br><span class="line">  from beauty b</span><br><span class="line">  where bo.`id`=b.`boyfriend_id`</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h2><h3 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表</span><br><span class="line">[	join type join 表2</span><br><span class="line">	on 连接条件</span><br><span class="line">	where 筛选条件</span><br><span class="line"> 	group by 分组字段</span><br><span class="line"> 	having 分组后的筛选</span><br><span class="line"> 	order by 排序字段</span><br><span class="line">]</span><br><span class="line">limit offset,size;</span><br><span class="line"></span><br><span class="line"># offset 要显示条目的起始索引(从0开始)</span><br><span class="line"># size 要显示的条目个数</span><br></pre></td></tr></table></figure>

<h3 id="特点-4"><a href="#特点-4" class="headerlink" title="特点"></a>特点</h3><ol>
<li><p>limit语句放在查询语句的最后(从执行和语法都是最后)</p>
</li>
<li><p><strong>公式</strong></p>
<blockquote>
<p>要显示的页数 page, 每页条目数 size</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表</span><br><span class="line">limit (page-1)*size, size;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<h3 id="案例-3"><a href="#案例-3" class="headerlink" title="案例"></a>案例</h3><ol>
<li><p>查询前5条</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from employees limit 0,5;</span><br><span class="line">select * from employees limit 5;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询第11-25</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from employees limit 10,15;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="查询的执行顺序"><a href="#查询的执行顺序" class="headerlink" title="查询的执行顺序"></a>查询的执行顺序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表 			#7</span><br><span class="line">from 表							#1</span><br><span class="line">join type join 表2		#2</span><br><span class="line">on 连接条件						#3</span><br><span class="line">where 筛选条件				#4</span><br><span class="line">group by 分组字段			#5</span><br><span class="line">having 分组后的筛选		 #6</span><br><span class="line">order by 排序字段			#8</span><br><span class="line">limit offset,size;	 #9</span><br></pre></td></tr></table></figure>

<h2 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h2><p><strong>将多条查询语句的结果合并成一个结果</strong></p>
<h3 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查询语句1</span><br><span class="line">union</span><br><span class="line">查询语句2</span><br><span class="line">union</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><p>当查询的结果来自多个表,并且多个表之间没有直接的连接关系,单查询的信息一致的时候</p>
<p>注意: <strong>union会去重</strong></p>
<h3 id="特点-5"><a href="#特点-5" class="headerlink" title="特点"></a>特点</h3><ol>
<li>要求多条查询语句的查询烈属是一致的</li>
<li>要求多条查询语句的每一列的类型和顺序最好一致</li>
<li><code>union</code>关键字默认去重,如果使用<code>union all</code>可以包含重复项</li>
</ol>
<h2 id="DML语言"><a href="#DML语言" class="headerlink" title="DML语言"></a>DML语言</h2><h3 id="插入语句"><a href="#插入语句" class="headerlink" title="插入语句"></a>插入语句</h3><h4 id="语法-5"><a href="#语法-5" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 方式一</span><br><span class="line">insert into 表名(列名1,...) values(值1,...),(值1,...);</span><br><span class="line"># 方式二</span><br><span class="line">insert into 表名 set 列名=值,列名=值,...;</span><br></pre></td></tr></table></figure>

<h4 id="特点-6"><a href="#特点-6" class="headerlink" title="特点"></a>特点</h4><ol>
<li>插入值的类型要与列的类型一致或兼容</li>
<li>不可以为null的列必须插入值</li>
<li>列的顺序可以调换</li>
<li>列数和值的个数必须一致</li>
<li>可以省略列名,默认所有列,而且列的顺序和表中列的顺序一致</li>
</ol>
<h4 id="两种方式"><a href="#两种方式" class="headerlink" title="两种方式"></a>两种方式</h4><ol>
<li><p>方式一支持插入多行</p>
</li>
<li><p>方式一支持子查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into beauty(id,name,phone)</span><br><span class="line">select 26,&#x27;xiaoming&#x27;,&#x27;123&#x27;;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="修改语句"><a href="#修改语句" class="headerlink" title="修改语句"></a>修改语句</h3><ol>
<li><p>修改单表的记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">update 表名</span><br><span class="line">set 列=新值,列=新值</span><br><span class="line">where 筛选条件;</span><br></pre></td></tr></table></figure>

<p><code>update beauty set phone = &#39;13899992222&#39; where name like &#39;唐%&#39;;</code></p>
</li>
<li><p>修改多表的记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># sql92</span><br><span class="line">update 表1 别名1, 表2 别名2</span><br><span class="line">set 列=值,...</span><br><span class="line">where 连接条件</span><br><span class="line">and 筛选条件;</span><br><span class="line"></span><br><span class="line"># sql99</span><br><span class="line">update 表1 别名</span><br><span class="line">inner|left|right join 表2 别名</span><br><span class="line">on 连接条件</span><br><span class="line">set 列=值,...</span><br><span class="line">where 连接条件</span><br><span class="line">and 筛选条件;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">update boys bo</span><br><span class="line">inner join beauty b on bo.`id`=b.`boyfriend_id`</span><br><span class="line">set b.`phone`=&#x27;114&#x27;</span><br><span class="line">where bo.`boyName`=&#x27;张无忌&#x27;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="删除语句"><a href="#删除语句" class="headerlink" title="删除语句"></a>删除语句</h3><h4 id="语法-6"><a href="#语法-6" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 方式一: delete</span><br><span class="line"># 单表</span><br><span class="line">delete from 表名 where 筛选条件;</span><br><span class="line"></span><br><span class="line"># 多表</span><br><span class="line"># sql92</span><br><span class="line">delete 别名1,别名2</span><br><span class="line">from 表1 别名1,表2 别名2</span><br><span class="line">where 连接条件</span><br><span class="line">and 筛选条件;</span><br><span class="line"># sql99</span><br><span class="line">delete 表1别名,表2别名</span><br><span class="line">from 表1 别名</span><br><span class="line">inner|left|right join 表2 别名 on 连接条件</span><br><span class="line">where 筛选条件;</span><br><span class="line"></span><br><span class="line"># 方式二: truncate 删除整个表</span><br><span class="line">truncate table 表名;</span><br></pre></td></tr></table></figure>

<h4 id="区别-面试重点"><a href="#区别-面试重点" class="headerlink" title="区别(面试重点)"></a>区别(面试重点)</h4><ol>
<li><p>delete 可以加where条件,truncate不添加</p>
</li>
<li><p>truncate要删除,效率高一点</p>
</li>
<li><p>加入要删除的表中有自增长列</p>
<p>如果用delete删除后,再插入数据,自增长列的值从断点开始</p>
<p>如果用truncate删除,再插入数据,自增长的列的值从1开始</p>
</li>
<li><p>truncate删除没有返回值,delete删除有返回值</p>
</li>
<li><p>truncate删除不能回滚,delete删除可以回滚</p>
</li>
</ol>
<h4 id="案例-4"><a href="#案例-4" class="headerlink" title="案例"></a>案例</h4><p>删除张无忌女朋友的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">delete b</span><br><span class="line">from beauty b</span><br><span class="line">inner join boys bo on b.`boyfriend_id`=bo.`id`</span><br><span class="line">where bo.`boyName`=&#x27;张无忌&#x27;;</span><br></pre></td></tr></table></figure>

<h2 id="DDL语言"><a href="#DDL语言" class="headerlink" title="DDL语言"></a>DDL语言</h2><h3 id="概念-3"><a href="#概念-3" class="headerlink" title="概念"></a>概念</h3><p>数据定义语言</p>
<p>库和表的管理</p>
<ul>
<li>库的管理<ul>
<li>创建,修改,删除</li>
</ul>
</li>
<li>表的管理<ul>
<li>创建修改删除</li>
</ul>
</li>
</ul>
<p>创建: create</p>
<p>修改: alter</p>
<p>删除: drop</p>
<h3 id="库的管理"><a href="#库的管理" class="headerlink" title="库的管理"></a>库的管理</h3><h4 id="库的创建"><a href="#库的创建" class="headerlink" title="库的创建"></a>库的创建</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database [if not exists] 库名;</span><br></pre></td></tr></table></figure>

<h4 id="库的修改"><a href="#库的修改" class="headerlink" title="库的修改"></a>库的修改</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rename database books to 新库名;</span><br><span class="line">alter database books character set gbk;</span><br></pre></td></tr></table></figure>

<h4 id="库的删除"><a href="#库的删除" class="headerlink" title="库的删除"></a>库的删除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database if exists books;</span><br></pre></td></tr></table></figure>

<h3 id="表的管理"><a href="#表的管理" class="headerlink" title="表的管理"></a>表的管理</h3><h4 id="表的创建"><a href="#表的创建" class="headerlink" title="表的创建"></a>表的创建</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">	列名 列的类型[(长度) 约束],</span><br><span class="line">  列名 列的类型[(长度) 约束],</span><br><span class="line">  列名 列的类型[(长度) 约束],</span><br><span class="line">  ...</span><br><span class="line">  列名 列的类型[(长度) 约束]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">create table book(</span><br><span class="line">	id int, # 编号</span><br><span class="line">  bName varchar(20), # 图书名</span><br><span class="line">  price double, # 价格</span><br><span class="line">  authorId int, # 作者编号</span><br><span class="line">  publishDate datetime # 出版日期</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC book;</span><br><span class="line"></span><br><span class="line">create table author(</span><br><span class="line">	id int,</span><br><span class="line">  aName varchar(20),</span><br><span class="line">  nation varchar(10)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC author;</span><br></pre></td></tr></table></figure>

<h4 id="表的修改"><a href="#表的修改" class="headerlink" title="表的修改"></a>表的修改</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表明 add|drop|modify|change column 列名 [列类型] [约束];</span><br></pre></td></tr></table></figure>



<h5 id="修改列名"><a href="#修改列名" class="headerlink" title="修改列名"></a>修改列名</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table book change column pulishdate pubDate datetime; # 要加类型在后面</span><br></pre></td></tr></table></figure>

<h5 id="修改列的类型或约束"><a href="#修改列的类型或约束" class="headerlink" title="修改列的类型或约束"></a>修改列的类型或约束</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table book modify column pubdate timestamp;</span><br></pre></td></tr></table></figure>

<p>添加列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE author ADD COLUMN annual DOUBLE;</span><br></pre></td></tr></table></figure>

<p>删除列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE author DROP COLUMN annual;</span><br></pre></td></tr></table></figure>

<p>修改表名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE author RENAME TO book_author;</span><br></pre></td></tr></table></figure>

<h4 id="表的删除"><a href="#表的删除" class="headerlink" title="表的删除"></a>表的删除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS book_author;</span><br><span class="line">SHOW TABLES;</span><br></pre></td></tr></table></figure>

<h4 id="表的复制"><a href="#表的复制" class="headerlink" title="表的复制"></a>表的复制</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO author VALUES(1,&#x27;村上春树&#x27;,&#x27;日本&#x27;),</span><br><span class="line">(2,&#x27;莫言&#x27;,&#x27;中国&#x27;),</span><br></pre></td></tr></table></figure>

<ol>
<li><p>仅仅复制表的结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE copy LIKE author;</span><br></pre></td></tr></table></figure>
</li>
<li><p>复制表的结构外加数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE copy2</span><br><span class="line">SELECT * FROM author;</span><br></pre></td></tr></table></figure>
</li>
<li><p>复制部分数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE copy3</span><br><span class="line">SELECT id,au_name</span><br><span class="line">FROM author</span><br><span class="line">WHERE nation=&#x27;中国&#x27;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>仅仅复制某些字段,不复制数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE copy4</span><br><span class="line">SELECT id,au_name</span><br><span class="line">FROM author</span><br><span class="line">where 0;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="分类-3"><a href="#分类-3" class="headerlink" title="分类"></a>分类</h3><ul>
<li>数值型<ul>
<li>整数</li>
<li>小数<ul>
<li>定点数</li>
<li>浮点数</li>
</ul>
</li>
</ul>
</li>
<li>字符型<ul>
<li>较短的文本: char, varchar</li>
<li>较长的文本: text, blob(较长的二进制数据)</li>
</ul>
</li>
<li>日期型</li>
</ul>
<h3 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h3><table>
<thead>
<tr>
<th>整数类型</th>
<th>字节</th>
<th>范围</th>
</tr>
</thead>
<tbody><tr>
<td>tinyint</td>
<td>1</td>
<td>无符号-128<del>127;有符号0</del>255</td>
</tr>
<tr>
<td>smallint</td>
<td>2</td>
<td>有符号-32768<del>32767; 无符号0</del>65535</td>
</tr>
<tr>
<td>mediumint</td>
<td>3</td>
<td>不用记住</td>
</tr>
<tr>
<td>int, integer</td>
<td>4</td>
<td>-2147483648~2147483647 (装逼可以记住)</td>
</tr>
<tr>
<td>bigint</td>
<td>8</td>
<td>不用记住</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h6 id="特点-7"><a href="#特点-7" class="headerlink" title="特点"></a>特点</h6><ol>
<li><p>如果不设置无符号还是有符号,默认是有符号,如果想设置无符号,需要添加unsigned关键字</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_int(</span><br><span class="line">	t1 INT,</span><br><span class="line">  t2 INT UNSIGNED,</span><br><span class="line">  t3 INT(7) ZEROFILL # 指定长度,用0填充,包含UNSIGNED</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

</li>
<li><p>如果插入的数值超出了整型的范围,会报out of range异常,并且插入临界值</p>
</li>
<li><p>如果不设置长度,会有默认的长度</p>
</li>
<li><p>长度代表了显示的最大宽度,如果不够在左边填充,但必须搭配zerofill使用</p>
</li>
</ol>
<h3 id="小数"><a href="#小数" class="headerlink" title="小数"></a>小数</h3><ul>
<li>浮点型<ul>
<li>float(M,D)</li>
<li>double(M,D)</li>
</ul>
</li>
<li>定点型<ul>
<li>dec(M,D)</li>
<li>decimal(M,D)</li>
</ul>
</li>
</ul>
<h6 id="特点-8"><a href="#特点-8" class="headerlink" title="特点"></a>特点</h6><ol>
<li>M和D:<ol>
<li>M: 整数部位+小数部位</li>
<li>D: 小数部位</li>
<li>超出插入临界值</li>
</ol>
</li>
<li>M和D都可以省略. 如果是decimal,则M默认为10,D默认为0;如果是float和double,则会根据插入的数值和精度来决定精度</li>
<li>定点型精度较高,如果要求插入的数值的精度较高,如货币运算等,考虑使用</li>
</ol>
<h6 id="原则"><a href="#原则" class="headerlink" title="原则"></a>原则</h6><p>所选择的类型越简单越好,能保存数值的类型越小越好</p>
<h3 id="字符型"><a href="#字符型" class="headerlink" title="字符型"></a>字符型</h3><ul>
<li>较短的文本: char, varchar</li>
<li>较长的文本: text, blob(较大的二进制)</li>
</ul>
<h4 id="特点-9"><a href="#特点-9" class="headerlink" title="特点"></a>特点</h4><table>
<thead>
<tr>
<th></th>
<th>写法</th>
<th>M的意思</th>
<th>特点</th>
<th>空间耗费</th>
<th>效率</th>
</tr>
</thead>
<tbody><tr>
<td>char</td>
<td>char(M)</td>
<td>最大的字符数,可以省略,默认1</td>
<td>固定长度的字符</td>
<td>比较耗费</td>
<td>高</td>
</tr>
<tr>
<td>varchar</td>
<td>varchar(M)</td>
<td>最大的字符数,不可以省略</td>
<td>可变长度的字符</td>
<td>比较节省</td>
<td>低</td>
</tr>
</tbody></table>
<h4 id="binary和varbinary类型"><a href="#binary和varbinary类型" class="headerlink" title="binary和varbinary类型"></a>binary和varbinary类型</h4><p>类似于char和varchar,不同的是它们包含二进制字符串而不包含非二进制字符串</p>
<h4 id="enum"><a href="#enum" class="headerlink" title="enum"></a>enum</h4><p>不区分大小写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create table tab_char(</span><br><span class="line">	c1 ENUM(&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="set"><a href="#set" class="headerlink" title="set"></a>set</h4><p>和enum类似,里面可以保存0-64个成员</p>
<p>和enum类型最大的区别就是: set类型可以一次选取多个成员,而enum只能选一个</p>
<p>根据成员个数不同,存储所占的字节也不同</p>
<table>
<thead>
<tr>
<th>成员数</th>
<th>字节数</th>
</tr>
</thead>
<tbody><tr>
<td>1-8</td>
<td>1</td>
</tr>
<tr>
<td>9-16</td>
<td>2</td>
</tr>
<tr>
<td>17-24</td>
<td>3</td>
</tr>
<tr>
<td>25-32</td>
<td>4</td>
</tr>
<tr>
<td>33-64</td>
<td>8</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table tab_set(</span><br><span class="line">	s1 SET(&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into tab_set values(&#x27;a&#x27;); # a</span><br><span class="line">insert into tab_set values(&#x27;A,B&#x27;); # a,b</span><br><span class="line">insert into tab_set values(&#x27;a,c,d&#x27;); # a,c,d</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="日期型"><a href="#日期型" class="headerlink" title="日期型"></a>日期型</h3><h4 id="分类-4"><a href="#分类-4" class="headerlink" title="分类"></a>分类</h4><ul>
<li>date 只保存日期</li>
<li>time 只保存时间</li>
<li>year 只保存年</li>
<li>datetime 保存日期+时间</li>
<li>timestamp 保存日期+时间</li>
</ul>
<h4 id="特点-10"><a href="#特点-10" class="headerlink" title="特点"></a>特点</h4><table>
<thead>
<tr>
<th></th>
<th>字节</th>
<th>范围</th>
<th>时区影响</th>
</tr>
</thead>
<tbody><tr>
<td>datetime</td>
<td>8</td>
<td>1000-9999</td>
<td>不受</td>
</tr>
<tr>
<td>timestamp</td>
<td>4</td>
<td>1970-2038</td>
<td>受</td>
</tr>
</tbody></table>
<h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><p>一种限制,用于限制表中的数据,为了保证表中的数据的准确和可靠性</p>
<h3 id="六大约束"><a href="#六大约束" class="headerlink" title="六大约束"></a>六大约束</h3><ul>
<li>NOT NULL: 非空,用于保证该字段的值不能为空<ul>
<li>比如姓名学号等</li>
</ul>
</li>
<li>DEFAULT: 默认,用于保证该字段有默认值<ul>
<li>比如性别</li>
</ul>
</li>
<li>PRIMARY KEY: 主键,用于保证该字段的值具有唯一性,并且非空<ul>
<li>比如编号</li>
</ul>
</li>
<li>UNIQUE: 唯一,用于保证该字段的值具有唯一性,可以为空<ul>
<li>比如座位号</li>
</ul>
</li>
<li>CHECK: 检查约束[mysql中不支持]<ul>
<li>比如要求年龄段只能为18-60</li>
</ul>
</li>
<li>FOREIGN KEY: 外键,用于限制两个表的关系,用于保证该字段的值必须来自于主表的关联列的值<ul>
<li>在从表中添加外键约束,用于引用主表中某列的值</li>
<li>比如员工表的部门编号</li>
<li>要求:<ul>
<li>在从表设置外键关联</li>
<li>从表的外键列的类型和主表的关联列的类型要求一致或兼容,名称无要求</li>
<li>主表的关联列必须是一个key(是主键或唯一)</li>
<li>插入数据时,先插入主表,再插入从表</li>
<li>删除数据时,先删除从表,再删除主表</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>主键和唯一的对比</strong>:</p>
<ul>
<li>主键<ul>
<li>唯一</li>
<li>不允许为空</li>
<li>一表只能有一个</li>
<li>允许组合,但不推荐 <code>primary key(a,b)</code></li>
</ul>
</li>
<li>唯一<ul>
<li>唯一</li>
<li>可以为空</li>
<li>一表可以有多个</li>
<li>允许组合,但不推荐</li>
</ul>
</li>
</ul>
<p><strong>添加约束的时机</strong>: 创建表或修改表时</p>
<p>约束的添加分类</p>
<ul>
<li>列级约束<ul>
<li>位置: 列的后面.直接在字段名和类型后面追加约束类型即可</li>
<li>六大约束语法上都支持, 但外键约束没有效果(check也没)</li>
</ul>
</li>
<li>表级约束<ul>
<li>位置: 所有列的下面</li>
<li>除了非空,默认,其他都支持</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">	字段名	字段类型 列级约束,</span><br><span class="line">  字段名 字段类型,</span><br><span class="line">  表级约束</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="添加约束"><a href="#添加约束" class="headerlink" title="添加约束"></a>添加约束</h3><h4 id="创建表时添加"><a href="#创建表时添加" class="headerlink" title="创建表时添加"></a>创建表时添加</h4><h5 id="添加列级"><a href="#添加列级" class="headerlink" title="添加列级"></a>添加列级</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">use students;</span><br><span class="line"></span><br><span class="line">create table major(</span><br><span class="line">	id int primary key,</span><br><span class="line">  majorName varchar(20)</span><br><span class="line">);</span><br><span class="line">create table stuinfo(</span><br><span class="line">	id int primary key, # 主键</span><br><span class="line">  stuName varchar(20) not null,</span><br><span class="line">  gender char(1) check(gender=&#x27;男&#x27; or gender=&#x27;女&#x27;), # 检查</span><br><span class="line">  seat int unique, # 唯一</span><br><span class="line">  age int default 18, # 默认</span><br><span class="line">  majorId int references major(id), # 外键</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">desc stuinfo;</span><br><span class="line"># 查看所有索引, 包括主键,外键,唯一</span><br><span class="line">show index from stuinfo;</span><br></pre></td></tr></table></figure>

<h5 id="添加表级"><a href="#添加表级" class="headerlink" title="添加表级"></a>添加表级</h5><p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 在各个字段最下面</span><br><span class="line">[constraint 约束名] 约束类型(字段名)</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">create table stuinfo(</span><br><span class="line">	id int,</span><br><span class="line">  stuName varchar(20),</span><br><span class="line">  gender char(1), # 检查</span><br><span class="line">  seat int, # 唯一</span><br><span class="line">  age int, # 默认</span><br><span class="line">  majorId int, # 外键</span><br><span class="line">  </span><br><span class="line">  constraint pk primary key(id),</span><br><span class="line">  constraint uq unique(seat),</span><br><span class="line">  constraint ck check(gender=&#x27;男&#x27; or gender=&#x27;女&#x27;), # 检查</span><br><span class="line">  constraint fk_stuinfo_major foreign key(majorId) references major(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="通用写法"><a href="#通用写法" class="headerlink" title="通用写法"></a>通用写法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists stuinfo(</span><br><span class="line">	id int primary key, # 主键</span><br><span class="line">  stuName varchar(20) not null,</span><br><span class="line">  gender char(1) check(gender=&#x27;男&#x27; or gender=&#x27;女&#x27;), # 检查</span><br><span class="line">  seat int unique, # 唯一</span><br><span class="line">  age int default 18, # 默认</span><br><span class="line">  majorId int,</span><br><span class="line">  </span><br><span class="line">  # 为了明显区别外键</span><br><span class="line">  constraint fk_stuinfo_major foreign key(majorId) references major(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="修改表时添加约束"><a href="#修改表时添加约束" class="headerlink" title="修改表时添加约束"></a>修改表时添加约束</h4><h5 id="语法-7"><a href="#语法-7" class="headerlink" title="语法"></a>语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 1. 添加列级约束</span><br><span class="line">alter table 表名 modify column 字段名 字段类型 新约束;</span><br><span class="line"># 2. 添加表级约束</span><br><span class="line">alter table 表名 add [constraint 约束名] 约束类型(字段名) [外键的引用];</span><br></pre></td></tr></table></figure>

<h5 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h5><ol>
<li><p>添加非空约束</p>
<p><code>ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NOT NULL;</code></p>
</li>
<li><p>添加主键</p>
<ol>
<li><p>列级</p>
<p><code>ALTER TABLE stuinfo MODIFY COLUMN id INT PRIMARY KEY;</code></p>
</li>
<li><p>表级</p>
<p><code>ALTER TABLE stuinfo ADD UNIQUE(seat);</code></p>
</li>
</ol>
</li>
<li><p>添加外键</p>
<p><code>ALTER TABLE stuinfo ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorId) REFERENCES major(id) ;</code></p>
</li>
</ol>
<h4 id="修改表时删除约束"><a href="#修改表时删除约束" class="headerlink" title="修改表时删除约束"></a>修改表时删除约束</h4><ol>
<li><p>删除非空约束</p>
<p><code>ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NULL;</code></p>
</li>
<li><p>删除默认约束</p>
<p><code>ALTER TABLE stuinfo MODIFY COLUMN age INT;</code></p>
</li>
<li><p>删除主键</p>
<p><code>ALTER TABLE stuinfo DROP PRIMARY KEY;</code></p>
</li>
<li><p>删除唯一</p>
<p><code>ALTER TABLE stuinfo DROP INDEX seat;</code></p>
</li>
<li><p>删除外键</p>
<p><code>ALTER TABLE stuinfo DROP FOREIGN KEY fk_stuinfo_major;</code></p>
</li>
</ol>
<h3 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h3><ol>
<li><p>向表中id列加PRIMARY KEY约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 列级约束不可以起名</span><br><span class="line">ALTER TABLE emp2 MODIFY COLUMN id INT PRIMARY KEY;</span><br><span class="line"># 表级约束可以起名</span><br><span class="line">ALTER TABLE emp2 ADD constrain my_emp_id_pk PRIMARY KEY(id);</span><br></pre></td></tr></table></figure>
</li>
<li><p>向表emp2中添加列dept_id,并在其中定义FOREIGN KEY约束,与之相关联的列是dept2表中的id列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp2 ADD COLUMN dept_id INT;</span><br><span class="line">ALTER TABLE emp2 ADD CONSTRAINT fk_emp2_dept2 FOREIGN KEY(dept_id) REFERENCES dept2(id);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="标识列"><a href="#标识列" class="headerlink" title="标识列"></a>标识列</h2><p>又称为自增长列</p>
<p>可以不用手动的插入值,系统提供默认的序列值</p>
<h3 id="特点-11"><a href="#特点-11" class="headerlink" title="特点"></a>特点</h3><ol>
<li>标识列不一定需要和主键搭配,但要求是个key</li>
<li><strong>一个表至多一个标识列!</strong></li>
<li>标识列的类型只能是数值型</li>
</ol>
<h3 id="创建表时设置标识列"><a href="#创建表时设置标识列" class="headerlink" title="创建表时设置标识列"></a>创建表时设置标识列</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table tab_identity(</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">  NAME VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#x27;%auto_increment%&#x27;;</span><br></pre></td></tr></table></figure>

<p>使用指令<code>SHOW VARIABLES LIKE &#39;%auto_increment%&#39;;</code>可以看到有两个参数</p>
<ul>
<li>auto_increment_increment    步长<ul>
<li>修改: <code>set auto_increment_increment=3;</code></li>
</ul>
</li>
<li>auto_increment_offset  偏移量</li>
</ul>
<p><strong>起始值更改</strong>: 在某个地方手动插入一个值</p>
<h3 id="修改表时设置标识列"><a href="#修改表时设置标识列" class="headerlink" title="修改表时设置标识列"></a>修改表时设置标识列</h3><p><code>ALTER TABLE tab_identity MODIFY COLUMN id INT PRIMARY KEY AUTO_INCREMENT;</code></p>
<h3 id="修改表时删除标识列"><a href="#修改表时删除标识列" class="headerlink" title="修改表时删除标识列"></a>修改表时删除标识列</h3><p><code>ALTER TABLE tab_identity MODIFY COLUMN id INT;</code></p>
<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>事务: 一个或一组sql语句组成一个执行单元,这个执行单元要么全部执行,要么全部不执行.</p>
<h3 id="ACID"><a href="#ACID" class="headerlink" title="ACID"></a>ACID</h3><ul>
<li>原子性 Atomicity<ul>
<li>事务是一个不可分割的工作单位,事务中的操作要么都发生,要么都不发生</li>
</ul>
</li>
<li>一致性 Consistency<ul>
<li>事务必须使数据库从一个一致性状态变换到另一个一致性状态</li>
</ul>
</li>
<li>隔离性 Isolation<ul>
<li>事务的隔离性是指一个事务的执行不能被其他事务干扰.即一个事务内部的操作及使用的数据对并发的其他事务是隔离的,并发执行的各个事务之间不能互相干扰</li>
</ul>
</li>
<li>持久性 Durability<ul>
<li>指一个事务一旦被提交,它对数据库中数据的改变就是永久性的</li>
</ul>
</li>
</ul>
<h3 id="事务的创建"><a href="#事务的创建" class="headerlink" title="事务的创建"></a>事务的创建</h3><ul>
<li>隐式事务<ul>
<li>事务没有明显的开始和结束的标记</li>
<li>比如insert,update,delete语句</li>
</ul>
</li>
<li>显式事务<ul>
<li>事务具有明显的开启和结束的标记</li>
<li>前提: 必须先设置自动提交功能为禁用<ul>
<li><code>set autocommit=0;</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 1. 开启事务</span><br><span class="line">set autocommit=0;</span><br><span class="line">start transaction;# 可选</span><br><span class="line"># 2. 编写事务中的语句</span><br><span class="line"># 语句一</span><br><span class="line"># 语句二</span><br><span class="line"></span><br><span class="line"># 3. 结束事务</span><br><span class="line">commit; 提交事务</span><br><span class="line">rollback; 回滚事务</span><br></pre></td></tr></table></figure>

<h3 id="数据库隔离级别"><a href="#数据库隔离级别" class="headerlink" title="数据库隔离级别"></a>数据库隔离级别</h3><p>对于同时运行多个事务,当这些事务访问数据库中<strong>相同的数据</strong>时,如果没有采取必要的隔离措施,就会导致各种并发问题</p>
<ul>
<li>脏读<ul>
<li>对于两个事务T1,T2,T1读取了已经被T2更新但是还没有被提交的字段. 如果T2回滚,T1读取的内容就是临时并且无效的(与幻读相比针对的是更新)</li>
</ul>
</li>
<li>不可重复读<ul>
<li>对于两个事务T1,T2,T1读取了一个字段,然后T2更新了该字段. 之后T1再次读取同一个字段,值会不同</li>
</ul>
</li>
<li>幻读<ul>
<li>对于两个事务T1,T2. T1从一个表中读取了一个字段,然后T2在该表中插入了一些新的行.之后如果T1再次读取同一个表,就会多出几行(与脏读相比针对的是插入和删除)</li>
</ul>
</li>
</ul>
<p>所以,<strong>数据库系统必须具有隔离并发运行各个事务的能力,使它们不会相互影响,避免引发各种并发问题</strong></p>
<h4 id="隔离级别"><a href="#隔离级别" class="headerlink" title="隔离级别"></a>隔离级别</h4><p>一个事务与其他事务隔离的程度称为隔离级别.</p>
<p>数据库规定了各种事务隔离级别,不同隔离级别对应不同的干扰程度.</p>
<p><strong>隔离级别越高,数据一致性就越好,但并发性越弱</strong></p>
<p>数据库提供了四种隔离级别</p>
<table>
<thead>
<tr>
<th align="center">隔离级别</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">READ UNCOMMITTED(读未提交数据)</td>
<td>允许事务读取未被其他事务提交的变更. 脏读,不可重复读,幻读的问题都会出现</td>
</tr>
<tr>
<td align="center">READ COMMITTED(读已提交数据)</td>
<td>只允许事务读取已经被其他事务提交的变更,可以避免脏读,但不可重复读和幻读问题仍然可能出现</td>
</tr>
<tr>
<td align="center">REPEATABLE READ(可重复读)</td>
<td>确保事务可以多次从一个字段中读取相同的值.但在这个事务持续期间,禁止其他事务对这个字段进行更新.可以避免脏读和不可重复读,但是幻读的问题依然存在</td>
</tr>
<tr>
<td align="center">SERIALIZABLE(串行化)</td>
<td>确保事务可以从一个表中读取相同的行,在这个事务持续期间,禁止其他事务对该表执行插入,更新和删除操作.所有并发问题都能避免,但是性能十分低下</td>
</tr>
</tbody></table>
<ul>
<li>oracle支持两种: READ COMMITED(默认), SERIALIZABLE.</li>
<li>mysql支持四种: 默认为REPEATABLE READ</li>
</ul>
<h4 id="查看数据库隔离级别"><a href="#查看数据库隔离级别" class="headerlink" title="查看数据库隔离级别"></a>查看数据库隔离级别</h4><p>mysql8+: <code>select @@transaction_isolation;</code></p>
<p>mysql5.x: <code>select @@tx_isolation;</code></p>
<h4 id="设置隔离级别"><a href="#设置隔离级别" class="headerlink" title="设置隔离级别"></a>设置隔离级别</h4><p>当前:<code>set session transaction isolation level read uncommitted;</code></p>
<p>全局:<code>set global transaction isolation level read committed;</code></p>
<h3 id="savepoint"><a href="#savepoint" class="headerlink" title="savepoint"></a>savepoint</h3><p>设置节点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">set autocommit=0;</span><br><span class="line">start transaction;</span><br><span class="line">delete from account where id=25;</span><br><span class="line">savepoint a; # 设置保存点</span><br><span class="line">delete from account where id=28;</span><br><span class="line">rollback to a; # 回滚到保存点</span><br></pre></td></tr></table></figure>

<h2 id="删除有外键关联的主表数据"><a href="#删除有外键关联的主表数据" class="headerlink" title="删除有外键关联的主表数据"></a>删除有外键关联的主表数据</h2><h3 id="级联删除"><a href="#级联删除" class="headerlink" title="级联删除"></a>级联删除</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table stuinfo add constraint fk_stu_major foreign key(majorId) references major(id)</span><br><span class="line">on delete cascade; # 级联删除</span><br></pre></td></tr></table></figure>

<h3 id="级联置空"><a href="#级联置空" class="headerlink" title="级联置空"></a>级联置空</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table stuinfo add constraint fk_stu_major foreign key(majorId) references major(id)</span><br><span class="line">on delete set null; # 级联置空, 将关联的外键置为空</span><br></pre></td></tr></table></figure>

<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><ul>
<li>系统变量<ul>
<li>全局变量 global<ul>
<li>作用域: 服务器每次启动将为所有的全局变量赋初始值,针对于所有的会话(连接)有效,但不能跨重启</li>
</ul>
</li>
<li>会话变量 session<ul>
<li>作用域: 仅仅针对于当前会话有效</li>
</ul>
</li>
</ul>
</li>
<li>自定义变量<ul>
<li>用户变量<ul>
<li>作用域: 针对于当前会话(连接)有效,同于会话变量的作用域</li>
<li>定义和使用的位置: 会话中任何地方</li>
<li>语法: 必须加@</li>
</ul>
</li>
<li>局部变量<ul>
<li>作用域: 仅仅在定义它的begin end中有效</li>
<li>定义和使用的位置: 只能在BEGIN END中,且为一句话</li>
<li>语法: 一般不用加@</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h3><p>由系统提供,不是用户自定义,属于服务器层面</p>
<p>如果是全局级别,加global, 会话变量不用加,默认.</p>
<h4 id="查看所有的系统变量"><a href="#查看所有的系统变量" class="headerlink" title="查看所有的系统变量"></a>查看所有的系统变量</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show global|[session] variables; # session可以不写,为默认</span><br></pre></td></tr></table></figure>

<h4 id="查看满足条件的部分系统变量"><a href="#查看满足条件的部分系统变量" class="headerlink" title="查看满足条件的部分系统变量"></a>查看满足条件的部分系统变量</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show global|[session] variables like &#x27;%char%&#x27;;</span><br></pre></td></tr></table></figure>

<h4 id="查看指定的某个系统变量的值"><a href="#查看指定的某个系统变量的值" class="headerlink" title="查看指定的某个系统变量的值"></a>查看指定的某个系统变量的值</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@global|[session].系统变量名 # 有个.</span><br></pre></td></tr></table></figure>

<h4 id="为某个系统变量赋值"><a href="#为某个系统变量赋值" class="headerlink" title="为某个系统变量赋值"></a>为某个系统变量赋值</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 1.</span><br><span class="line">set global|[session] 系统变量名 = 值;</span><br><span class="line"># 2.</span><br><span class="line">set @@global|[session]|.系统变量名=值;</span><br></pre></td></tr></table></figure>

<h3 id="自定义变量"><a href="#自定义变量" class="headerlink" title="自定义变量"></a>自定义变量</h3><p>使用步骤: </p>
<ul>
<li>声明</li>
<li>赋值</li>
<li>使用(查看,比较,运算等)</li>
</ul>
<h4 id="用户变量"><a href="#用户变量" class="headerlink" title="用户变量"></a>用户变量</h4><ol>
<li><p>声明并初始化</p>
<p>赋值操作符: = 或:= (因为=类似比较所以增加了:=; set都可以,select只能后者)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set @用户变量名=值;</span><br><span class="line">set @用户变量名:=值;</span><br><span class="line">select @用户变量名:=值;</span><br></pre></td></tr></table></figure>
</li>
<li><p>赋值(更新用户变量的值)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">   # 方式一: set或select</span><br><span class="line">   set @用户变量名=值;</span><br><span class="line">   set @用户变量名:=值;</span><br><span class="line">   select @用户变量名:=值;</span><br><span class="line">   </span><br><span class="line"># 方式二: 通过select into</span><br><span class="line">   select 字段 into 变量名 from 表;</span><br><span class="line"></span><br><span class="line">   # 示例</span><br><span class="line">   set @name=&#x27;john&#x27;;</span><br><span class="line">   set @name=100;</span><br><span class="line">   set @count=1;</span><br><span class="line"></span><br><span class="line">   select count(*) into @count from employees;</span><br></pre></td></tr></table></figure>

</li>
<li><p>使用(查看用户变量的值)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @用户变量名;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h4><ol>
<li><p>声明</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">declare 变量名 类型;</span><br><span class="line">declare 变量名 类型 default 值;</span><br></pre></td></tr></table></figure>
</li>
<li><p>赋值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 方式一: set或select</span><br><span class="line">set 局部变量名=值;</span><br><span class="line">set 局部变量名:=值;</span><br><span class="line">select @局部变量名:=值;</span><br><span class="line"></span><br><span class="line"># 方式二: 通过select into</span><br><span class="line">select 字段 into 局部变量名 from 表;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @局部变量名;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 用户变量</span><br><span class="line">set @m=1;</span><br><span class="line">set @n=2;</span><br><span class="line">set @sum = @m + @n;</span><br><span class="line">select @sum;</span><br><span class="line"></span><br><span class="line"># 局部变量</span><br><span class="line">declare m int default 1;</span><br><span class="line">declare n int default 2;</span><br><span class="line">declare sum int;</span><br><span class="line">set sum = m + n;</span><br></pre></td></tr></table></figure>

<h2 id="存储过程的介绍"><a href="#存储过程的介绍" class="headerlink" title="存储过程的介绍"></a>存储过程的介绍</h2><p>存储过程和函数,类似于java中的方法</p>
<p>好处:</p>
<ol>
<li>提高代码重用性</li>
<li>简化操作</li>
</ol>
<h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><p>一组预先编译好的SQL语句的集合,理解成批处理语句</p>
<ol>
<li>提高代码重用性</li>
<li>简化操作</li>
<li>减少了编译次数并且减少了和数据库服务器的连接次数,提高了效率</li>
</ol>
<h4 id="创建语法"><a href="#创建语法" class="headerlink" title="创建语法"></a>创建语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create procedure 存储过程名(参数列表)</span><br><span class="line">begin</span><br><span class="line">		存储过程体(一组合法的SQL语句)</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>注意:</p>
<ol>
<li><p>参数列表包含三部分: 参数模式,参数名,参数类型. <code>IN stuname VARCHAR(20)</code></p>
<ol>
<li>参数模式:<ol>
<li>IN: 该参数可以作为输入, 也就是说该参数需要调用方传入值</li>
<li>OUT: 该参数可以作为输出, 也就是该参数可以作为返回值</li>
<li>INOUT: 该参数既可以作为输入也可以作为输出</li>
</ol>
</li>
</ol>
</li>
<li><p>如果存储过程体仅仅只有一句话,BEGIN END可以省略</p>
</li>
<li><p>存储过程体中的每一条SQL语句的结尾要求必须加分号</p>
</li>
<li><p>存储过程的结尾(分号)可以使用<code>DELIMITER</code>重新设置</p>
<p>语法:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER 结束标记</span><br><span class="line"></span><br><span class="line"># 示例</span><br><span class="line">DELIMITER $</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="调用语法"><a href="#调用语法" class="headerlink" title="调用语法"></a>调用语法</h4><p><code>CALL 存储过程名(实参列表);</code></p>
<h5 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"># 1. 空参列表</span><br><span class="line"># 插入admin中五条记录</span><br><span class="line">SELECT * FROM admin;</span><br><span class="line"></span><br><span class="line">DELIMITER $</span><br><span class="line">CREATE procedure myp1()</span><br><span class="line">BEGIN</span><br><span class="line">		insert into admin(username,`password`) values(&#x27;john1&#x27;,&#x27;0000&#x27;),(&#x27;lily&#x27;,&#x27;0000&#x27;),(&#x27;rose&#x27;,&#x27;0000&#x27;),(&#x27;jack&#x27;,&#x27;0000&#x27;),(&#x27;tom&#x27;,&#x27;0000&#x27;),;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line">CALL myp1()$ # 注意结束符号已经替换掉了!</span><br><span class="line"></span><br><span class="line"># 2. IN</span><br><span class="line"># 创建存储过程实现根据女生名查询对应的男生名的信息</span><br><span class="line">create procedure myp2(in beautyName varchar(20))</span><br><span class="line">begin</span><br><span class="line">		select bo.*</span><br><span class="line">		from boys bo</span><br><span class="line">		right join beauty b on bo.id=b.boyfriend_id</span><br><span class="line">		where b.name=beautyName;</span><br><span class="line">end $</span><br><span class="line"># 调用</span><br><span class="line">CALL myp2(&#x27;柳岩&#x27;)$</span><br><span class="line"></span><br><span class="line"># 创建存储过程实现用户是否登录成功</span><br><span class="line">create procedure myp3(in username varchar(20), in password varchar(20))</span><br><span class="line">begin</span><br><span class="line">		declare result varchar(20) default &#x27;&#x27;;</span><br><span class="line">		select count(*) into result # 赋值(局部变量)</span><br><span class="line">		from admin</span><br><span class="line">		where admin.username = username</span><br><span class="line">		and admin.password = password;</span><br><span class="line">		</span><br><span class="line">		select if(result&gt;0,&#x27;成功&#x27;,&#x27;失败&#x27;);</span><br><span class="line">end $</span><br><span class="line"># 调用</span><br><span class="line">call myp3(&#x27;张飞&#x27;,&#x27;8888&#x27;)$</span><br><span class="line"></span><br><span class="line"># 3. OUT</span><br><span class="line"># 根据女生名,返回对应的男生名</span><br><span class="line">create procedure myp5(in beautyName varchar(20),out boyName varchar(20))</span><br><span class="line">begin</span><br><span class="line">		select bo.boyName into boyName # 在这加上into</span><br><span class="line">		from boys bo</span><br><span class="line">		inner join beauty b on bo.id=b.boyfriend_id</span><br><span class="line">		where b.name=beautyName;</span><br><span class="line">end $</span><br><span class="line"># 调用</span><br><span class="line">set @bName$ # 定义一个用户变量(不定义也可以)</span><br><span class="line">call myp5(&#x27;小昭&#x27;,@bName)$</span><br><span class="line">select @bName$ # 拿到结果</span><br><span class="line"></span><br><span class="line"># 根据女生名返回对应男生名和魅力值</span><br><span class="line">create procedure myp6(in beautyName varchar(20),out boyName varchar(20), out userCP int)</span><br><span class="line">begin</span><br><span class="line">		select bo.boyName,bo.userCP into boyName,userCP # 在这加上into</span><br><span class="line">		from boys bo</span><br><span class="line">		inner join beauty b on bo.id=b.boyfriend_id</span><br><span class="line">		where b.name=beautyName;</span><br><span class="line">end $</span><br><span class="line">#调用</span><br><span class="line">call myp6(&#x27;小昭&#x27;,@name,@cp)$ # 没有定义,也可以直接拿到结果</span><br><span class="line">select @name,@cp$</span><br><span class="line"></span><br><span class="line"># 4. 创建带inout模式参数的存储过程</span><br><span class="line"># 传入a和b两个值,最终a和b都翻倍并返回</span><br><span class="line">create procedure myp8(inout a int, inout b int)</span><br><span class="line">begin</span><br><span class="line">		set a=a*2;</span><br><span class="line">		set b=b*2;</span><br><span class="line">end $</span><br><span class="line"></span><br><span class="line">set @m=10$;</span><br><span class="line">set @n=20$;</span><br><span class="line">call myp8(@m,@n)$</span><br><span class="line">select @m,@n$</span><br></pre></td></tr></table></figure>

<h4 id="删除语法"><a href="#删除语法" class="headerlink" title="删除语法"></a>删除语法</h4><p><code>DROP PROCEDURE 存储过程名</code></p>
<p><strong>只能一次删一个</strong></p>
<h4 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h4><p><code>DESC myp2;</code> 是错误的</p>
<p><code>SHOW CREATE PROCEDURE myp2;</code></p>
<h4 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h4><p>不能修改,只能删除重建</p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>一组预先编译好的SQL语句的集合,理解成批处理语句</p>
<ol>
<li>提高代码重用性</li>
<li>简化操作</li>
<li>减少了编译次数并且减少了和数据库服务器的连接次数,提高了效率</li>
</ol>
<h4 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h4><p>存储过程: 可以有0个返回,也可以有多个返回. <strong>适合做批量插入,批量更新</strong></p>
<p>函数: 有且仅有1个返回. <strong>适合做处理数据后返回一个结果</strong></p>
<h4 id="创建语法-1"><a href="#创建语法-1" class="headerlink" title="创建语法"></a>创建语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create function 函数名(参数列表) returns 返回类型</span><br><span class="line">begin</span><br><span class="line">		函数体</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>注意:</p>
<ol>
<li>参数列表 包含两部分: 参数名    参数类型</li>
<li>函数体: 肯定会有return语句,如果没有会报错. 如果return语句没有放在函数体的最后也不报错,但不建议</li>
<li>函数体中仅有一句话,则可以省略begin end</li>
<li>使用delimiter语句设置结束标记</li>
</ol>
<h4 id="调用语法-1"><a href="#调用语法-1" class="headerlink" title="调用语法"></a>调用语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 函数名(参数列表)</span><br></pre></td></tr></table></figure>

<h5 id="案例-5"><a href="#案例-5" class="headerlink" title="案例"></a>案例</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#1.无参有返回</span><br><span class="line">#返回公司的员工个数</span><br><span class="line">create funtion myf1() returns int</span><br><span class="line">begin</span><br><span class="line">		declare c int default 0; #定义变量</span><br><span class="line">		select count(*) into c #赋值</span><br><span class="line">		from employees;</span><br><span class="line">		return c;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">select myf1()$</span><br><span class="line"></span><br><span class="line">#2.有参有返回</span><br><span class="line">#案例1: 根据员工名,返回他的工资</span><br><span class="line">create function myf2(empName varchar(20)) returns double</span><br><span class="line">begin</span><br><span class="line">		set @sal=0; #定义了一个用户变量</span><br><span class="line">		select salary into @sal #赋值</span><br><span class="line">		from employees</span><br><span class="line">		where last_name = empName;</span><br><span class="line">		return @sal;</span><br><span class="line">end $</span><br><span class="line"></span><br><span class="line">select myf2(&#x27;小明&#x27;)$</span><br><span class="line">#案例2: 根据部门名,返回该部门的平均工资 </span><br><span class="line">create function myf3(deptName varchar(20)) returns double</span><br><span class="line">begin</span><br><span class="line">		declare sal double;</span><br><span class="line">		select avg(salary) into sal</span><br><span class="line">		from employees e</span><br><span class="line">		join departments d on e.department_id = d.department_id</span><br><span class="line">		where d.department_name=deptName;</span><br><span class="line">		return sal;</span><br><span class="line">end $</span><br><span class="line">select myf3(&#x27;IT&#x27;)$</span><br></pre></td></tr></table></figure>

<h4 id="查看函数"><a href="#查看函数" class="headerlink" title="查看函数"></a>查看函数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create funtion myf3;</span><br></pre></td></tr></table></figure>

<h4 id="删除函数"><a href="#删除函数" class="headerlink" title="删除函数"></a>删除函数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop function myf3;</span><br></pre></td></tr></table></figure>

<h4 id="案例-6"><a href="#案例-6" class="headerlink" title="案例"></a>案例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 创建函数实现传入两个float,返回二者之和</span><br><span class="line">create function test_fun1(num1 float,num2 float) returns float</span><br><span class="line">begin</span><br><span class="line">		declare mysum float default 0;</span><br><span class="line">		set mysum=num1+num2;</span><br><span class="line">		return mysum;</span><br><span class="line">end $</span><br><span class="line">select test_fun1(1,2)$</span><br></pre></td></tr></table></figure>

<h2 id="流程控制结构"><a href="#流程控制结构" class="headerlink" title="流程控制结构"></a>流程控制结构</h2><ul>
<li>顺序结构: 程序从上往下依次执行</li>
<li>分支结构: 程序从两条或多条路径中选择一条去执行</li>
<li>循环结构: 程序在满足一定条件的基础上,重复执行一段代码</li>
</ul>
<h3 id="分支结构"><a href="#分支结构" class="headerlink" title="分支结构"></a>分支结构</h3><h4 id="if函数"><a href="#if函数" class="headerlink" title="if函数"></a>if函数</h4><p>功能: 实现简单地双分支</p>
<p>语法: <code>if(表达式1,表达式2,表达式3)</code></p>
<p>执行顺序: 如果表达式1成立,则if函数返回表达式2的值,否则返回表达式3的值</p>
<p>应用位置: 任何地方</p>
<h4 id="case结构"><a href="#case结构" class="headerlink" title="case结构"></a>case结构</h4><p>情况1: 类似java中的switch语句,一般用于实现等值判断</p>
<p>情况2: 类似java中的多重if语句,一般用于实现区间判断</p>
<h5 id="特点-12"><a href="#特点-12" class="headerlink" title="特点"></a>特点</h5><ol>
<li>可以作为表达式,嵌套在其他语句中使用,可以放在任何地方, <code>BEGIN END</code>中或<code>BEGIN END</code>外面</li>
<li>可以作为独立的语句去使用,只能放在<code>BEGIN END</code>中</li>
<li>如果when中的值满足或条件成立,则执行对应的then后面的语句,并且结束case; 如果都不满足,则执行else中的语句或值</li>
<li>else可以省略,如果else省略了,并且所有的when条件都不满足,则返回null</li>
</ol>
<h5 id="案例-7"><a href="#案例-7" class="headerlink" title="案例"></a>案例</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#根据传入的成绩来显示等级</span><br><span class="line">create procedure test_case(IN score INT)</span><br><span class="line">begin</span><br><span class="line">		case</span><br><span class="line">		when score&gt;=90 and score&lt;=100 then select &#x27;A&#x27;;</span><br><span class="line">		when score&gt;=80 then select &#x27;B&#x27;;</span><br><span class="line">		when score&gt;=60 then select &#x27;C&#x27;;</span><br><span class="line">		else select &#x27;D&#x27;;</span><br><span class="line">		end case;</span><br><span class="line">end $</span><br><span class="line">call test_case(95)$</span><br></pre></td></tr></table></figure>

<h4 id="if结构"><a href="#if结构" class="headerlink" title="if结构"></a>if结构</h4><p>功能: 实现多重分支</p>
<p>语法:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if 条件1 then 语句1;</span><br><span class="line">elseif 条件2 then 语句2;</span><br><span class="line">...</span><br><span class="line">[else 语句n;]</span><br><span class="line">end if;</span><br></pre></td></tr></table></figure>

<p>应用位置: <strong>begin end中</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#根据传入的成绩来显示等级</span><br><span class="line">create function test_if(score int) returns char</span><br><span class="line">begin</span><br><span class="line">		if score&gt;=90 and score&lt;=100 then return &#x27;A&#x27;;</span><br><span class="line">		elseif score&gt;=80 then return &#x27;B&#x27;;</span><br><span class="line">		elseif score&gt;=60 then return &#x27;C&#x27;;</span><br><span class="line">		else return &#x27;D&#x27;;</span><br><span class="line">		end if;</span><br><span class="line">end $</span><br><span class="line">select test_if(86)$</span><br></pre></td></tr></table></figure>

<h3 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h3><p>分类: </p>
<ul>
<li>while<ul>
<li>先判断后执行</li>
</ul>
</li>
<li>loop<ul>
<li>没有条件的死循环</li>
</ul>
</li>
<li>repeat<ul>
<li>先执行后判断</li>
</ul>
</li>
</ul>
<p>循环控制: </p>
<ul>
<li><p>iterate类似于continue,继续,结束本次循环,继续下一次</p>
</li>
<li><p>leave 类似于break, 跳出,结束当前所在的循环</p>
<ul>
<li>如果添加必须添加标签</li>
</ul>
</li>
</ul>
<h4 id="while"><a href="#while" class="headerlink" title="while"></a>while</h4><h5 id="语法-8"><a href="#语法-8" class="headerlink" title="语法"></a>语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[标签:] while 循环条件 do</span><br><span class="line">		循环体;</span><br><span class="line">end while [标签];</span><br></pre></td></tr></table></figure>

<h4 id="loop"><a href="#loop" class="headerlink" title="loop"></a>loop</h4><h5 id="语法-9"><a href="#语法-9" class="headerlink" title="语法"></a>语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[标签:] loop</span><br><span class="line">		循环体;</span><br><span class="line">end loop [标签];</span><br><span class="line">#可以用来模拟简单的死循环</span><br></pre></td></tr></table></figure>

<h4 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h4><h5 id="语法-10"><a href="#语法-10" class="headerlink" title="语法"></a>语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[标签:] repeat</span><br><span class="line">		循环体;</span><br><span class="line">until 结束循环的条件</span><br><span class="line">end repeat [标签];</span><br></pre></td></tr></table></figure>

<h4 id="案例-8"><a href="#案例-8" class="headerlink" title="案例"></a>案例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#批量插入,根据次数插入到admin表中多条记录</span><br><span class="line">create procedure pro_while1(in insertCount int)</span><br><span class="line">begin</span><br><span class="line">		declare i int default 1;</span><br><span class="line">		while i&lt;=insertCount do</span><br><span class="line">				insert into admin(username,`password`) values(&#x27;Rose&#x27;+i,&#x27;666&#x27;);</span><br><span class="line">				set i=i+1;</span><br><span class="line">		end while;</span><br><span class="line">end $</span><br><span class="line">call pro_while1(100)$</span><br><span class="line"></span><br><span class="line">#添加leave语句:批量插入,根据次数插入到admin表中多条记录,如果次数&gt;20则停止</span><br><span class="line">truncate table admin$</span><br><span class="line">drop procedure test_while1$</span><br><span class="line">create procedure test_while1(in insertCount int)</span><br><span class="line">begin</span><br><span class="line">		declare i int default 1;</span><br><span class="line">		a: while i&lt;=insertCount do</span><br><span class="line">					insert into admin(username,`password`) values(concat(&#x27;xiaoming&#x27;,i),i);</span><br><span class="line">					if i&gt;=20 then leave a;</span><br><span class="line">					end if;</span><br><span class="line">					set i=i+1;</span><br><span class="line">				end while a;</span><br><span class="line">end $</span><br><span class="line">call test_while1(100)$</span><br><span class="line"></span><br><span class="line">#添加iterate语句: 批量插入,根据次数插入到admin表中多条记录,只插入偶数次</span><br><span class="line">truncate table admin$</span><br><span class="line">drop procedure test_while1$</span><br><span class="line">create procedure test_while1(in insertCount int)</span><br><span class="line">begin</span><br><span class="line">		declare i int default 1;</span><br><span class="line">		a: while i&lt;=insertCount do</span><br><span class="line">					set i=i+1;</span><br><span class="line">					if mod(i,2) != 0 then iterate a;</span><br><span class="line">					end if;</span><br><span class="line">					insert into admin(username,`password`) values(concat(&#x27;xiaoming&#x27;,i),i);</span><br><span class="line">				end while a;</span><br><span class="line">end $</span><br><span class="line">call test_while1(100)$</span><br></pre></td></tr></table></figure>


      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://yiiiqing.github.io/2021/05/06/Mysql%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C-%E5%9F%BA%E7%A1%80/" title="Mysql学习手册-基础" target="_blank" rel="external">http://yiiiqing.github.io/2021/05/06/Mysql%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C-%E5%9F%BA%E7%A1%80/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/yiiiqing" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/yiiiqing" target="_blank"><span class="text-dark">Yiqing</span><small class="ml-1x">Web Developer</small></a></h3>
        <div>一位打工人</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="lv-container" data-id="city" data-uid="MTAyMC81MTg5OS8yODM4MA==">
        <noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
      </div>    
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/06/01/Mysql%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C-%E9%AB%98%E7%BA%A7/" title="MySQL学习手册-高级"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/04/30/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB/" title="数据库隔离级别"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>感谢您的支持，我会继续努力的!</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/yiiiqing" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://weibo.com/6370670336/profile?topnav=1&wvr=6&is_all=1" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





   
    
<script defer type="text/javascript">
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];

    if (typeof LivereTower === 'function') { return; }

    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;

    e.parentNode.insertBefore(j, e);
  })(document, 'script');
</script>








</body>
</html>